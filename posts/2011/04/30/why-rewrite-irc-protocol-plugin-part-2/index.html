<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Feed configuration. -->
    <link href="https://patrick.cloke.us/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Patrick Cloke Atom Feed" />
    <link href="https://patrick.cloke.us/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Patrick Cloke RSS Feed" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="/theme/css/styles.css">
    <link rel="stylesheet" href="/theme/css/borland.css">
    <link rel="stylesheet" href="/theme/css/youtube.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <title>Why rewrite the IRC protocol plugin? (Part 2)</title>

    <meta property="og:site_name" content="Patrick Cloke" />
<meta property="og:title" content="Why rewrite the IRC protocol plugin? (Part 2)" />
<meta property="og:url" content="https://patrick.cloke.us/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/" />
<meta property="og:description" content="I previously wrote about why I’m rewriting the libpurple IRC implementation into a JavaScript implementation for Instantbird. This is kind of a follow up, but more focused on what I hope to accomplish feature wise for IRC in Instantbird. A good overview to look at is the dependencies of …" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-04-30T13:01:00-04:00" />
<meta property="article:author" content="Patrick Cloke" />
<meta property="article:tag" content="Instantbird" />
<meta property="article:tag" content="IRC" />

    <script async defer data-domain="cloke.us" src="https://plausible.io/js/plausible.js"></script>
  </head>

  <body class="pb-5">
    <nav class="navbar navbar-expand-lg sticky-top navbar-light bg-light border-bottom border-info">
      <a class="navbar-brand" href="/">
        Patrick Cloke
      </a>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-items" aria-controls="navbar-items" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <span class="collapse navbar-collapse" id="navbar-items">
        <ul class="navbar-nav ml-auto">

          <li class="nav-item">
            <a class="nav-link" href="/pages/about.html">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/pages/projects.html">Projects</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="/archives.html">Archives</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/tags.html">Tags</a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="social-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Social
            </a>

            <span class="dropdown-menu dropdown-menu-right" aria-labelledby="social-dropdown">
              <a class="dropdown-item" href="https://mastodon.social/@clokep" target="_blank">
                  <span class="fab fa-mastodon mr-1"></span>
                mastodon
              </a>
              <a class="dropdown-item" href="https://www.twitter.com/clokep" target="_blank">
                  <span class="fab fa-twitter mr-1"></span>
                twitter
              </a>
              <a class="dropdown-item" href="https://matrix.to/#/@clokep:matrix.org" target="_blank">
                  <span class="pl-3 mr-2"></span>
                matrix
              </a>
              <a class="dropdown-item" href="https://github.com/clokep" target="_blank">
                  <span class="fab fa-github mr-1"></span>
                github
              </a>
              <a class="dropdown-item" href="https://gitlab.com/clokep" target="_blank">
                  <span class="fab fa-gitlab mr-1"></span>
                gitlab
              </a>
              <a class="dropdown-item" href="https://www.linkedin.com/in/patrickcloke/" target="_blank">
                  <span class="fab fa-linkedin mr-1"></span>
                linkedin
              </a>
            </span>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="feeds-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Feeds
            </a>

            <span class="dropdown-menu dropdown-menu-right" aria-labelledby="feeds-dropdown">
              <a class="dropdown-item" href="https://patrick.cloke.us/feeds/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a>
              <a class="dropdown-item" href="https://patrick.cloke.us/feeds/rss.xml" type="application/rss+xml" rel="alternate">rss feed</a>
            </span>
          </li>

          <form class="form-inline" method="get" action="http://www.google.com/search">
            <input class="form-control form-control-sm mr-sm-2" type="search" name="q" placeholder="Search" aria-label="Search" />
            <input type="hidden"  name="sitesearch" value="patrick.cloke.us" />

            <button class="btn btn-sm btn-outline-info d-none d-sm-inline" type="submit">Search</button>
          </form>
        </ul>
      </div>
    </nav>

<div class="container">
  <div class="row">
    <div class="col-md-12 mt-2 mb-2">
      <h1>
        <a href="/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/" rel="bookmark"
           title="Permalink to Why rewrite the IRC protocol plugin? (Part 2)">Why rewrite the <span class="caps">IRC</span> protocol plugin? (Part&nbsp;2)</a>
      </h1>

      <div class="row">
        <div class="col-sm">
          <span class="text-secondary font-weight-light font-italic">Published on Saturday, April 30, 2011</span>

          <br>
          <span class="text-secondary font-weight-light font-italic">
            Tags:               <a href="/tag/instantbird.html">Instantbird</a>,              <a href="/tag/irc.html">IRC</a>          </span>
        </div>

        <div class="col-sm text-right">
          <a href="https://twitter.com/intent/tweet?text=Why%20rewrite%20the%20IRC%20protocol%20plugin%3F%20%28Part%C2%A02%29&url=https%3A//patrick.cloke.us/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/&hashtags=instantbird,irc" target="_blank" class="ml-1 mr-1" title="Share on Twitter">
            <span class="fab fa-twitter"></span>
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//patrick.cloke.us/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/" target="_blank" class="ml-1 mr-1" title="Share on Facebook">
            <span class="fab fa-facebook"></span>
          </a>
          <a href="mailto:?subject=Why%20rewrite%20the%20IRC%20protocol%20plugin%3F%20%28Part%C2%A02%29&amp;body=https%3A//patrick.cloke.us/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/" target="_blank" class="ml-1 mr-1" title="Share via Email">
            <span class="fas fa-envelope"></span>
          </a>
        </div>
      </div>

      <hr>

      <div>

        <p>I <a class="reference external" href="https://patrick.cloke.us/posts/2010/12/08/why-rewrite-irc-into-javascript/">previously wrote about</a> why I&#8217;m rewriting the libpurple <span class="caps">IRC</span>
implementation into a JavaScript implementation for Instantbird. This
is kind of a follow up, but more focused on what I hope to accomplish
feature wise for <span class="caps">IRC</span> in Instantbird. A good overview to look at is the
<a class="reference external" href="https://bugzilla.instantbird.org/showdependencygraph.cgi?id=507&amp;display=web&amp;rankdir=LR">dependencies of bug 507</a> (implement <span class="caps">IRC</span> in JavaScript) &#8212; you&#8217;ll want
to look to the left of bug 507, these are the bugs that depend on 507
(as opposed to blocking&nbsp;507).</p>
<p>My overall hope is to make Instantbird the easiest and simplest <span class="caps">IRC</span>
client to use. I&#8217;ve found that most <span class="caps">IRC</span> clients tend to depend a great
deal on commands and essentially being a very thin <span class="caps">GUI</span> layer on top of
the protocol. I don&#8217;t really see the reason for this, we should attempt
to hide the protocol as much as possible from the users. This means
fitting the <span class="caps">IRC</span> command responses into the <span class="caps">GUI</span> wherever possible and
possibly &#8220;losing&#8221; some features compared to other <span class="caps">IRC</span> clients, although
I think that&#8217;s a matter of perspective. (For example, there&#8217;s often an
<span class="caps">IRC</span> command to list all the channels available, I <em>do not</em> think this
should be implemented as a text command, but it should be available via
the join chat <span class="caps">GUI</span>).</p>
<p>Now some more specific&nbsp;plans:</p>
<ul class="simple">
<li>Support for <span class="caps">IRC</span> services would be pretty awesome, I&#8217;m not sure
whether this would be part of the main protocol or as an extension,
but it should be able to handle NickServ mostly autonomously
(possibly even automatically registering the nick, etc.). MemoServ
could be implemented as a message service once there is <span class="caps">UI</span> for that
in Instantbird. I&#8217;m not sure how ChanServ could be handled in the
<span class="caps">UI</span>, but I&#8217;ll think more about this. See <a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=720">bug 720</a> for more info.
(And yes, there are multiple versions of <span class="caps">IRC</span> services, but we can
attempt to support a subset and otherwise just leave it up to the
user. Ideally servers would have supported this stuff&#8230;but that&#8217;s
not how <span class="caps">IRC</span>&nbsp;works.)</li>
<li>The <span class="caps">UI</span> should be more responsive to the modes of the user and to the
channel. For example, if the user does not have permission to edit
the topic, it should not be editable in the <span class="caps">UI</span> (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=318">bug 318</a>). Also,
if a user is a (half-)operator, there should be <span class="caps">UI</span> to have cause
other users to be given (h)op (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=597">bug 597</a>). In terms of channel
modes, there could be <span class="caps">UI</span> to show the channel is invite only or that
it&#8217;s a hidden&nbsp;channel.</li>
</ul>
<p>There&#8217;s some not as user visible improvements I&#8217;d like to&nbsp;make:</p>
<ul class="simple">
<li>Supporting more authentication methods in <span class="caps">IRC</span> (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=719">bug 719</a>).</li>
</ul>
<p>There&#8217;s also a few &#8220;bugs&#8221; in the libpurple implementation that this
will&nbsp;fix:</p>
<ul class="simple">
<li>The /msg command doesn&#8217;t show outgoing messages (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=188">bug 188</a>). I
believe this is actually already&nbsp;fixed.</li>
<li><span class="caps">IRC</span> channels should automatically rejoin on reconnect (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=385">bug 385</a>).</li>
<li>Chats with other users should show whether they are available or not
(<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=613">bug 613</a>).</li>
</ul>
<p>These are just some ideas and it&#8217;s a long ways off for feature parity
with libpurple even. (Although since Instantbird doesn&#8217;t support all
the features of Pidgin, feature-parity in this case doesn&#8217;t include
things like <span class="caps">DCC</span> transfer, etc. until Instantbird itself supports&nbsp;those.)</p>
<p>Right now, the code is mostly usable (and I&#8217;m finally catching any
exceptions that are thrown so the code shouldn&#8217;t crash anymore), and
works fine. The one issue I&#8217;m having is sometimes I&#8217;m unable to
reconnect when the connection is lost, but I think I&#8217;ve finally fixed
that issue and reconnection should happen&nbsp;automatically!</p>
<p>One last quick note, if you happen to have the <a class="reference external" href="https://hg.instantbird.org/experiments">repository</a> checked
out, you&#8217;ll want to update on the default branch from now on as I&#8217;ve
merged the separate branches together under&nbsp;subfolders.</p>

      </div>

<div id="disqus_thread"></div>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = '/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/';
this.page.identifier = 'why-rewrite-irc-protocol-plugin-part-2';
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://clokep.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </div>
</div>

    <nav class="navbar fixed-bottom navbar-light bg-light border-top border-info">
      <a href="https://getpelican.com/" class="nav-item" target="_blank">Powered by Pelican</a>
      <a href="https://github.com/clokep/clokep.github.io" class="nav-item" target="_blank">
        Source available on GitHub <span class="fab fa-github"></span>
      </a>
    </nav>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

  </body>
</html>