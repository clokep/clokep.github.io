<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Feed configuration. -->
    <link href="https://patrick.cloke.us/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Patrick Cloke Atom Feed" />
    <link href="https://patrick.cloke.us/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Patrick Cloke RSS Feed" />

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="/theme/css/styles.css">
    <link rel="stylesheet" href="/theme/css/borland.css">
    <link rel="stylesheet" href="/theme/css/youtube.css">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <title>New Blog: Serving the Content</title>

    <meta property="og:site_name" content="Patrick Cloke" />
<meta property="og:title" content="New Blog: Serving the Content" />
<meta property="og:url" content="https://patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/" />
<meta property="og:description" content="In the first part of this blog post I talked about using Pelican to create a blog, this is a bit more about how I got it up and running.  Getting a Domain The most exciting part! Getting a domain! I used gandi.net, it was recommended to me by …" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-07-06T18:36:00-04:00" />
<meta property="article:author" content="Patrick Cloke" />
<meta property="article:tag" content="blog" />

    <script async defer data-domain="cloke.us" src="https://plausible.io/js/plausible.js"></script>
  </head>

  <body class="pb-5">
    <nav class="navbar navbar-expand-lg sticky-top navbar-light bg-light border-bottom border-info">
      <a class="navbar-brand" href="/">
        Patrick Cloke
      </a>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-items" aria-controls="navbar-items" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <span class="collapse navbar-collapse" id="navbar-items">
        <ul class="navbar-nav ml-auto">

          <li class="nav-item">
            <a class="nav-link" href="/pages/about.html">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/pages/projects.html">Projects</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="/archives.html">Archives</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/tags.html">Tags</a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="social-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Social
            </a>

            <span class="dropdown-menu dropdown-menu-right" aria-labelledby="social-dropdown">
              <a class="dropdown-item" href="https://mastodon.social/@clokep" target="_blank">
                  <span class="bi-mastodon mr-1"></span>
                mastodon
              </a>
              <a class="dropdown-item" href="https://www.twitter.com/clokep" target="_blank">
                  <span class="bi-twitter mr-1"></span>
                twitter
              </a>
              <a class="dropdown-item" href="https://matrix.to/#/@clokep:matrix.org" target="_blank">
                  <span class="pl-3 mr-2"></span>
                matrix
              </a>
              <a class="dropdown-item" href="https://github.com/clokep" target="_blank">
                  <span class="bi-github mr-1"></span>
                github
              </a>
              <a class="dropdown-item" href="https://gitlab.com/clokep" target="_blank">
                  <span class="bi-gitlab mr-1"></span>
                gitlab
              </a>
              <a class="dropdown-item" href="https://www.linkedin.com/in/patrickcloke/" target="_blank">
                  <span class="bi-linkedin mr-1"></span>
                linkedin
              </a>
            </span>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="feeds-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Feeds
            </a>

            <span class="dropdown-menu dropdown-menu-right" aria-labelledby="feeds-dropdown">
              <a class="dropdown-item" href="https://patrick.cloke.us/feeds/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a>
              <a class="dropdown-item" href="https://patrick.cloke.us/feeds/rss.xml" type="application/rss+xml" rel="alternate">rss feed</a>
            </span>
          </li>

          <form class="form-inline" method="get" action="http://www.google.com/search">
            <input class="form-control form-control-sm mr-sm-2" type="search" name="q" placeholder="Search" aria-label="Search" />
            <input type="hidden"  name="sitesearch" value="patrick.cloke.us" />

            <button class="btn btn-sm btn-outline-info d-none d-sm-inline" type="submit">Search</button>
          </form>
        </ul>
      </div>
    </nav>

<div class="container">
  <div class="row">
    <div class="col-md-12 mt-2 mb-2">
      <h1>
        <a href="/posts/2014/07/06/new-blog-serving-the-content/" rel="bookmark"
           title="Permalink to New Blog: Serving the Content">New Blog: Serving the&nbsp;Content</a>
      </h1>

      <div class="row">
        <div class="col-sm">
          <span class="text-secondary font-weight-light font-italic">Published on Sunday, July 6, 2014</span>

          <br>
          <span class="text-secondary font-weight-light font-italic">
            Tags:               <a href="/tag/blog.html">blog</a>          </span>
        </div>

        <div class="col-sm text-right">
          <a href="https://toot.kytta.dev/?text=New%20Blog%3A%20Serving%20the%C2%A0Content%0D%0Ahttps%3A//patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/%0D%0A%23blog" target="_blank" class="ml-1 mr-1" title="Share on Mastodon">
            <span class="bi-mastodon"></span>
          </a>
          <a href="https://twitter.com/intent/tweet?text=New%20Blog%3A%20Serving%20the%C2%A0Content&url=https%3A//patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/&hashtags=blog" target="_blank" class="ml-1 mr-1" title="Share on Twitter">
            <span class="bi-twitter"></span>
          </a>
          <a href="https://www.reddit.com/submit?url=https%3A//patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/&title=New%20Blog%3A%20Serving%20the%C2%A0Content" target="_blank" class="ml-1 mr-1" title="Share on Reddit">
            <span class="bi-reddit"></span>
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/" target="_blank" class="ml-1 mr-1" title="Share on Facebook">
            <span class="bi-facebook"></span>
          </a>
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/&title=New%20Blog%3A%20Serving%20the%C2%A0Content&summary=In%20the%20first%20part%20of%20this%20blog%20post%20I%20talked%20about%20using%20Pelican%20to%20create%20a%0Ablog%2C%20this%20is%20a%20bit%20more%20about%20how%20I%20got%20it%20up%20and%C2%A0running.%0A%0AGetting%20a%C2%A0Domain%0AThe%20most%20exciting%20part%21%20Getting%20a%20domain%21%20I%20used%20gandi.net%2C%20it%20was%0Arecommended%20to%20me%20by%20%E2%80%A6&source=https%3A//patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/" target="_blank" class="ml-1 mr-1" title="Share on LinkedIn">
            <span class="bi-linkedin"></span>
          </a>
          <a href="mailto:?subject=New%20Blog%3A%20Serving%20the%C2%A0Content&amp;body=https%3A//patrick.cloke.us/posts/2014/07/06/new-blog-serving-the-content/" target="_blank" class="ml-1 mr-1" title="Share via Email">
            <span class="bi-envelope"></span>
          </a>
        </div>
      </div>

      <hr>

      <div>
        <div class="border border-info bg-light rounded float-right p-2 ml-2 mb-2">
          <div class="toc" id="">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#getting-a-domain" id="toc-entry-1">Getting a Domain</a></li>
<li><a class="reference internal" href="#serving-the-content" id="toc-entry-2">Serving the Content</a></li>
<li><a class="reference internal" href="#redirect-blogger" id="toc-entry-3">Redirect Blogger</a></li>
</ul>
</div>
        </div>

        
<p>In the <a class="reference external" href="https://patrick.cloke.us/posts/2014/07/03/new-blog/">first part</a> of this blog post I talked about using Pelican to create a
blog, this is a bit more about how I got it up and running.</p>
<div class="section" id="getting-a-domain">
<h2><a class="toc-backref" href="#toc-entry-1">Getting a Domain</a></h2>
<p>The most exciting part! Getting a domain! I used <a class="reference external" href="https://www.gandi.net/">gandi.net</a>, it was
recommended to me by <a class="reference external" href="http://blog.queze.net/">Florian</a> as “awesome, but a bit expensive”. I liked that
they actually explain <a class="reference external" href="https://www.gandi.net/domain/interface">exactly</a> what I was getting by registering a domain
through them. Nowhere else I looked was this explicit.</p>
<p>Once you get your domain you’ll need to set up your <a class="reference external" href="https://en.wikipedia.org/wiki/CNAME"><span class="caps">CNAME</span></a> record to forward to
wherever you’re serving your content. I found it pretty interesting that gandi
essentially gives you an <a class="reference external" href="https://en.wikipedia.org/wiki/DNS_zone"><span class="caps">DNS</span> zone</a> file to modify. I ended up making a few modifications:</p>
<ul class="simple">
<li>Created a patrick subdomain (patrick.cloke.us)</li>
<li>Redirected the apex domain (cloke.us) to the patrick subdomain</li>
<li>Redirected the www subdomain to the patrick subdomain</li>
</ul>
<p>I also created a few email aliases which forward to the email accounts I already own.</p>
</div>
<div class="section" id="serving-the-content">
<h2><a class="toc-backref" href="#toc-entry-2">Serving the Content</a></h2>
<p><span class="caps">OK</span>, we have a domain! We have content! How do we actually link them!? I used
<a class="reference external" href="https://pages.github.com/">GitHub Pages</a>, cause I’m cheap and don’t like to pay for things. The quick version:</p>
<ul class="simple">
<li>Create a repository that is named <tt class="docutils literal">&lt;your account <span class="pre">name&gt;.github.io</span></tt></li>
<li>Push whatever <span class="caps">HTML</span> content you want into the master branch</li>
<li>Voila it’s available as &lt;your account name&gt;.github.io</li>
</ul>
<p>Personally, I store my Pelican code in a separate <a class="reference external" href="https://github.com/clokep/clokep.github.io">source</a> branch <a class="footnote-reference" href="#footnote-1" id="footnote-reference-1">[1]</a> and use
<a class="reference external" href="https://github.com/davisp/ghp-import">ghp-import</a> to actually publish my content. I’ve automated a lot of the tasks by
<a class="reference external" href="https://github.com/clokep/clokep.github.io/blob/source/fabfile.py">extending</a> the default <a class="reference external" href="http://www.fabfile.org/">fabfile.py</a> that is generated with the quickstart. My
workflow looks something like:</p>
<div class="highlight"><pre><span></span>komodo<span class="w"> </span>content/new-article.rst
<span class="c1"># &lt;edit article&gt;</span>
<span class="c1"># &lt;check it out in a browser using fab build/serve/regenerate&gt;</span>
git<span class="w"> </span>add<span class="w"> </span>content/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Add 'New Article!'."</span>
fab<span class="w"> </span>publish<span class="w"> </span><span class="c1"># Which runs "ghp-import -p -b master output" underneath!</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span><span class="nb">source</span>
</pre></div>
<p>One other thing you’ll need to do is add a <span class="caps">CNAME</span> file that has the domain of
your host in it (and only the domain). I found the GitHub documents on this
extremely confusing, but it’s pretty simple:</p>
<ul class="simple">
<li>Create a file called <span class="caps">CNAME</span> somewhere you have static files in Pelican (mine is
at content/static/<span class="caps">CNAME</span>)</li>
<li>Add a line to your pelicanconf.py to have this file end up in the root:</li>
</ul>
<div class="highlight"><pre><span></span><span class="c1"># Set up static content and output locations.</span>
<span class="n">STATIC_PATHS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'images'</span><span class="p">,</span>
    <span class="s1">'static/CNAME'</span>
<span class="p">]</span>
<span class="n">EXTRA_PATH_METADATA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'static/CNAME'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'path'</span><span class="p">:</span> <span class="s1">'CNAME'</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
<p>It took 10 - 20 minutes for this to “kick in” on GitHub, until that time I had a
404 GitHub page.</p>
</div>
<div class="section" id="redirect-blogger">
<h2><a class="toc-backref" href="#toc-entry-3">Redirect Blogger</a></h2>
<p>This is the really fun part. How the hell do we redirect blogger links to
actually go to the new location of each blog post? With some hackery, some luck,
and some magic.</p>
<p>I found some help in an article about <a class="reference external" href="http://www.labnol.org/internet/switch-from-blogger-to-wordpress/9707/">switching to WordPress from Blogger</a> and
modified the template they had there. On the Blogger dashboard, choose
“Template”, scroll to the bottom and click “Revert to Classic Template”. Then
use something like the following template:</p>
<pre class="code xml highlight literal-block">
<span class="nt">&lt;html&gt;</span><span class="w">
    </span><span class="nt">&lt;head&gt;</span><span class="w">
        </span><span class="nt">&lt;title&gt;</span><span class="err">&lt;</span>$BlogPageTitle$&gt;<span class="nt">&lt;/title&gt;</span><span class="w">
        </span><span class="nt">&lt;script&gt;</span><span class="w">
            </span><span class="nt">&lt;MainOrArchivePage&gt;</span><span class="w">
                </span>window.location.href<span class="w"> </span>=<span class="w"> </span>"http://patrick.cloke.us/";<span class="w">
            </span><span class="nt">&lt;/MainOrArchivePage&gt;</span><span class="w">
            </span><span class="nt">&lt;Blogger&gt;</span><span class="w">
                </span><span class="nt">&lt;ItemPage&gt;</span><span class="w">
                    </span>//<span class="w"> </span>This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>full<span class="w"> </span>permalink.<span class="w">
                    </span>var<span class="w"> </span>permalink<span class="w"> </span>=<span class="w"> </span>"<span class="err">&lt;</span>$BlogItemPermalinkURL$&gt;";<span class="w">
                    </span>//<span class="w"> </span>Split<span class="w"> </span>up<span class="w"> </span>each<span class="w"> </span>part<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>slash.<span class="w">
                    </span>var<span class="w"> </span>parts<span class="w"> </span>=<span class="w"> </span>permalink.split("/");<span class="w">
                    </span>//<span class="w"> </span>Take<span class="w"> </span>the<span class="w"> </span>last<span class="w"> </span>part<span class="w"> </span>(the<span class="w"> </span>page)<span class="w"> </span>and<span class="w"> </span>strip<span class="w"> </span>off<span class="w"> </span>the<span class="w"> </span>.html.<span class="w">
                    </span>var<span class="w"> </span>slug<span class="w"> </span>=<span class="w"> </span>parts.slice(-1)[0].slice(0,<span class="w"> </span>-5);<span class="w">

                    </span>var<span class="w"> </span>article<span class="w"> </span>=<span class="w"> </span>"http://patrick.cloke.us/posts/<span class="nt">&lt;BlogDateHeader&gt;</span><span class="err">&lt;</span>$BlogDateHeaderDate$&gt;<span class="nt">&lt;/BlogDateHeader&gt;</span>/"<span class="w"> </span>+<span class="w"> </span>slug;<span class="w">
                    </span>window.location.href<span class="w"> </span>=<span class="w"> </span>article;<span class="w">

                    </span>window.onload<span class="w"> </span>=<span class="w"> </span>function()<span class="w"> </span>{<span class="w">
                        </span>document.getElementById("linkrel").href<span class="w"> </span>=<span class="w"> </span>article;<span class="w">
                        </span>document.getElementById("simplelink").href<span class="w"> </span>=<span class="w"> </span>article;<span class="w">
                    </span>}<span class="w">
                </span><span class="nt">&lt;/ItemPage&gt;</span><span class="w">
            </span><span class="nt">&lt;/Blogger&gt;</span><span class="w">
        </span><span class="nt">&lt;/script&gt;</span><span class="w">
        </span><span class="nt">&lt;MainPage&gt;</span><span class="w">
            </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">rel=</span><span class="s">"canonical"</span><span class="w"> </span><span class="na">href=</span><span class="s">"http://patrick.cloke.us/"</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">
        </span><span class="nt">&lt;/MainPage&gt;</span><span class="w">
        </span><span class="nt">&lt;Blogger&gt;</span><span class="w">
            </span><span class="nt">&lt;ItemPage&gt;</span><span class="w">
                </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">id=</span><span class="s">"linkrel"</span><span class="w"> </span><span class="na">rel=</span><span class="s">"canonical"</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">
            </span><span class="nt">&lt;/ItemPage&gt;</span><span class="w">
        </span><span class="nt">&lt;/Blogger&gt;</span><span class="w">
    </span><span class="nt">&lt;/head&gt;</span><span class="w">
    </span><span class="nt">&lt;body&gt;</span><span class="w">
        </span><span class="nt">&lt;MainOrArchivePage&gt;</span><span class="w">
        </span><span class="nt">&lt;h1&gt;&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"http://patrick.cloke.us"</span><span class="nt">&gt;</span><span class="err">&lt;</span>$BlogTitle$&gt;<span class="nt">&lt;/a&gt;&lt;/h1&gt;</span><span class="w">
        </span><span class="nt">&lt;/MainOrArchivePage&gt;</span><span class="w">
        </span><span class="nt">&lt;Blogger&gt;</span><span class="w">
            </span><span class="nt">&lt;ItemPage&gt;</span><span class="w">
                </span><span class="nt">&lt;h1&gt;</span><span class="w">
                    </span><span class="nt">&lt;a</span><span class="w"> </span><span class="na">id=</span><span class="s">"simplelink"</span><span class="nt">&gt;</span><span class="w">
                        </span><span class="err">&lt;</span>$BlogItemTitle$&gt;<span class="w">
                    </span><span class="nt">&lt;/a&gt;</span><span class="w">
                </span><span class="nt">&lt;/h1&gt;</span><span class="w">
                </span><span class="err">&lt;</span>$BlogItemBody$&gt;<span class="w">
            </span><span class="nt">&lt;/ItemPage&gt;</span><span class="w">
        </span><span class="nt">&lt;/Blogger&gt;</span><span class="w">
    </span><span class="nt">&lt;/body&gt;</span><span class="w">
</span><span class="nt">&lt;/html&gt;</span>
</pre>
<p>Obviously you’ll need to change the URLs, but the key parts here are that we’re
generating a <span class="caps">URL</span> based on the date and the full article name. The magic comes in
generating the date. The get it in the format I wanted (<span class="caps">YYYY</span>/<span class="caps">MM</span>/<span class="caps">DD</span>) I modified a
the “Date Header Format” in “Settings” &gt; “Language and formatting”. This matches
how I formatted my URLs in my pelicanconf.py. The <tt class="docutils literal">slug</tt> that gets generated
needs to match the slug you used in your template so the link will work. (I had
<a class="reference external" href="https://support.google.com/blogger/answer/42095">some</a> <a class="reference external" href="http://www.elizabethcastro.com/blogvqj/extras/templatetags.html">help</a> in figuring out these template tags.)</p>
<p>I’d suggest you check the links to all your articles! A couple of the dates were
messed up in mine (the day was off by one, causing the forwarded location to be broken).</p>
<p>The last thing to do is to redirect the Atom/<span class="caps">RSS</span> feed (if anyone is using that).
Go to “Settings” &gt; “Other” &gt; “Post Feed Redirect <span class="caps">URL</span>” and set it to your new
Atom feed <span class="caps">URL</span> (wherever that might be).</p>
<table class="docutils footnote" frame="void" id="footnote-1" rules="none">
<colgroup><col class="label"/><col/></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#footnote-reference-1">[1]</a></td><td>Pro-tip: You can <a class="reference external" href="https://help.github.com/articles/setting-the-default-branch">change the “default” branch</a> of your repository in the
settings page on GitHub.</td></tr>
</tbody>
</table>
</div>

      </div>

<div id="disqus_thread"></div>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = '/posts/2014/07/06/new-blog-serving-the-content/';
this.page.identifier = 'new-blog-serving-the-content';
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://clokep.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </div>
</div>

    <nav class="navbar fixed-bottom navbar-light bg-light border-top border-info">
      <a href="https://getpelican.com/" class="nav-item" target="_blank">Powered by Pelican</a>
      <a href="https://github.com/clokep/clokep.github.io" class="nav-item" target="_blank">
        Source available on GitHub <span class="bi-github"></span>
      </a>
    </nav>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

  </body>
</html>