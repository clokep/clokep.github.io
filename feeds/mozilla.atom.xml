<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Like bricks in the sky</title><link href="https://clokep.github.io/" rel="alternate"></link><link href="https://clokep.github.io/feeds/mozilla.atom.xml" rel="self"></link><id>https://clokep.github.io/</id><updated>2014-06-18T23:46:00-04:00</updated><entry><title>Mentoring and Time</title><link href="https://clokep.github.io/mentoring-and-time.html" rel="alternate"></link><updated>2014-06-18T23:46:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2014-06-18:mentoring-and-time.html</id><summary type="html">&lt;div class="section" id="google-summer-of-code-2014"&gt;
&lt;h2&gt;Google Summer of Code 2014&lt;/h2&gt;
&lt;p&gt;I'm again mentoring for &lt;a class="reference external" href="https://www.google-melange.com/gsoc/homepage/google/gsoc2014"&gt;Google Summer of Code&lt;/a&gt; 2014, this year my student is
&lt;a class="reference external" href="http://sawrubh.tumblr.com/"&gt;Saurabh Anand&lt;/a&gt; (sawrubh), who has been working on a full related things:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Adding a &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1024023"&gt;file transfer mechanism for XMPP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Hooking up libpurple's file transfer code to Instantbird&lt;/li&gt;
&lt;li&gt;Integrating &lt;a class="reference external" href="https://support.mozilla.org/en-US/kb/filelink-large-attachments"&gt;FileLink&lt;/a&gt; as a fallback to in-protocol file transfers&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="on-time"&gt;
&lt;h2&gt;On Time&lt;/h2&gt;
&lt;p&gt;No, this is not about being late places, it's about respecting people's time. I
won't go super into this as, Michael Haggerty wrote an awesome &lt;a class="reference external" href="http://softwareswirl.blogspot.fr/2014/03/my-secret-tip-for-gsoc-success.html"&gt;article&lt;/a&gt; on this.
His thoughts boild down to a single line of advice:
&amp;quot;&lt;strong&gt;DON'T WASTE OTHER PEOPLE'S TIME&lt;/strong&gt;&amp;quot;.&lt;/p&gt;
&lt;p&gt;I think this applies to more than just Google Summer of Code mentoring, and not
only open source work, but anything where someone is mentoring and helping you!
This advice isn't meant just for GSoC students, interns or new employees, but
also things I'd like to remind myself to do.&lt;/p&gt;
&lt;p&gt;To make this sound a little more positive, I'd reword his advice as &lt;strong&gt;Respect
people's time!&lt;/strong&gt;. Someone is willing to help you, so assume some good faith,
but help them help you. Some actions to focus on:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Ask &lt;em&gt;focused&lt;/em&gt; questions! If you do not understand an answer, do not &lt;em&gt;re-ask&lt;/em&gt;
the same question, but ask &lt;em&gt;followup&lt;/em&gt; question. Show you've researched the
original answer and attempted to understand it. Write sample code, play with
it, etc. If you think the answer given doesn't apply to your question,
&lt;em&gt;reword&lt;/em&gt; your question: your mentor probably did not understand.&lt;/li&gt;
&lt;li&gt;Be cognizant of &lt;em&gt;timezones&lt;/em&gt;: if you'd like a question asked (in realtime), ask
it when the person is awake! (And this includes realizing if they have just
woken up or are going to bed.)&lt;/li&gt;
&lt;li&gt;They will not have the &lt;em&gt;context&lt;/em&gt; you do: your &amp;quot;mentor&amp;quot; might be helping many
people at once, try not to get frustrated if you have to explain your context
to them multiple times or have to clarify your question. You are living and
breathing the code you're working in; they are not.&lt;/li&gt;
&lt;li&gt;Don't be afraid to &lt;em&gt;post code&lt;/em&gt;. It's much easier to ask a question when
there's an example in front of you. Be specific and don't talk theoretically.&lt;/li&gt;
&lt;li&gt;Don't be upset about an &lt;em&gt;r-&lt;/em&gt; (a rejected change)! Part of helping you to grow
is telling you what you're doing wrong.&lt;/li&gt;
&lt;li&gt;Working &lt;em&gt;remotely&lt;/em&gt; is hard. It requires effort to build a level of trust
between people. Don't just assume it will come in time, but work at it and try
to get to know and understand your mentor.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Quickly&lt;/em&gt; respond to both feedback and questions. Your mentor is taking the
time out of whatever they're doing to help you. If they ask you a question or
ask something of you, do it now (well...*soon*).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All of the above is a lot to handle, but it can make it a join to work with a
mentor.&lt;/p&gt;
&lt;p&gt;Mentoring is also hard and a skill to practice. Although I've talked a lot
about what a mentee needs to do, it is also important that a mentor leaves
h(im|er)self open. A few thoughts on interacting as a mentor:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Be cognizant of &lt;em&gt;culture&lt;/em&gt; and &lt;em&gt;language&lt;/em&gt; (as in how well a mentor and mentee
share their common language). In particular, colloquialisms should be avoided
whenever possible. At least until a level of trust is reached.&lt;/li&gt;
&lt;li&gt;Be tactful when &lt;em&gt;giving feedback&lt;/em&gt;. Thank people for submitting a patch, give
good, &lt;em&gt;actionable&lt;/em&gt; feedback quickly. Concentrate more on overall code design
and algorithms than nits. (Maybe even point out nits, but fix them yourself
for an initial patch.)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary><category term="community"></category><category term="GSoC"></category></entry><entry><title>Extending JavaScript Maps (or other built-in objects)</title><link href="https://clokep.github.io/extending-javascript-maps-or-other-built-in-objects.html" rel="alternate"></link><updated>2014-04-27T17:46:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2014-04-27:extending-javascript-maps-or-other-built-in-objects.html</id><summary type="html">&lt;p&gt;Finally another technical post, this one is about my adventures in
attempting to extend the built-in &lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"&gt;Map&lt;/a&gt; object in JavaScript to extend
the functionality. As background, there are two reasons we'd want this:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;In the chat backend we currently use JavaScript &lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object"&gt;objects&lt;/a&gt; (&lt;tt class="docutils literal"&gt;{}&lt;/tt&gt;) as
hashes/maps to keep track of various things (i.e. there's a &lt;a class="reference external" href="https://mxr.mozilla.org/comm-central/source/chat/protocols/irc/irc.js#789"&gt;hash of
conversations&lt;/a&gt; which map from conversation name to prplIConversation
objects in the IRC code). Whenever checking to see if something is in
this map we have to use &lt;a class="reference external" href="https://mxr.mozilla.org/comm-central/source/chat/protocols/irc/irc.js#1509"&gt;hasOwnProperty&lt;/a&gt;. This has to be the
&lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty"&gt;version from Object.prototype&lt;/a&gt; in case the map has a conversation
named hasOwnProperty. This is &lt;a class="reference external" href="https://mxr.mozilla.org/comm-central/source/chat/modules/imXPCOMUtils.jsm#166"&gt;super simple code&lt;/a&gt;, but annoying:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// Similar to Object.hasOwnProperty, but doesn&amp;#39;t fail if the object&lt;/span&gt;
&lt;span class="c1"&gt;// has a hasOwnProperty property set.&lt;/span&gt;
&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;hasOwnProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aObject&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aPropertyName&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="nb"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;hasOwnProperty&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aObject&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aPropertyName&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=955366"&gt;Replacing these custom objects with a Map&lt;/a&gt; would alleviate this
funky dance.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Frequently in the chat backend we have to &amp;quot;normalize&amp;quot; &lt;a class="footnote-reference" href="#id4" id="id1"&gt;[1]&lt;/a&gt; strings
(e.g. #INsTanTBIrd and #instantbird are the same on IRC &lt;a class="footnote-reference" href="#id5" id="id2"&gt;[2]&lt;/a&gt;). This is
almost always done for sane storage of data received from the network
(or from the user). I figured it'd be great if, instead of having to
&lt;a class="reference external" href="https://mxr.mozilla.org/comm-central/source/chat/protocols/irc/irc.js#1510"&gt;manually&lt;/a&gt; &lt;a class="reference external" href="https://mxr.mozilla.org/comm-central/source/chat/protocols/irc/irc.js#1514"&gt;handle&lt;/a&gt; &lt;a class="reference external" href="https://mxr.mozilla.org/comm-central/source/chat/protocols/irc/irc.js#1528"&gt;this&lt;/a&gt; normalization each time we tried to
access data, the keys were magically normalized when accessing the
data.
(Note that although normalization is generally more complicated, just
consider to be &lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toLowerCase"&gt;String.prototype.toLowerCase()&lt;/a&gt; for the rest of this
post!)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This has been explored before by &lt;a class="reference external" href="http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/"&gt;others&lt;/a&gt;, but generally in the
context of web sites / cross browser compatibility. Which are concerns
that don't really limit us for backend code.&lt;/p&gt;
&lt;div class="section" id="goals"&gt;
&lt;h2&gt;Goals&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Replace objects with Maps for safe access. This is pretty easily
fixed by switching all &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;obj[&amp;quot;foo&amp;quot;]&lt;/span&gt;&lt;/tt&gt; calls to &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;obj.get(&amp;quot;foo&amp;quot;)&lt;/span&gt;&lt;/tt&gt; (or the
appropriate other method: set, delete, etc.)&lt;/li&gt;
&lt;li&gt;Automatically &amp;quot;normalize&amp;quot; keys in the some user defined way, e.g.
such that &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;obj.get(&amp;quot;foo&amp;quot;)&lt;/span&gt;&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;obj.get(&amp;quot;FoO&amp;quot;)&lt;/span&gt;&lt;/tt&gt; return the same value.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="first-approach-setting-proto-to-map-prototype"&gt;
&lt;h2&gt;First Approach (setting __proto__ to Map.prototype)&lt;/h2&gt;
&lt;p&gt;My first naive approach was to create an object with &lt;tt class="docutils literal"&gt;__proto__&lt;/tt&gt; set
to Map.prototype and overwrite anything that uses keys to appropriately
call a normalization function.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;__proto__&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toLowerCase&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;

    &lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
    &lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aVal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nx"&gt;aVal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;// Throws TypeError: set method called on incompatible Object&lt;/span&gt;
&lt;span class="nx"&gt;m&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// true . . . wat . . .&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This throws an error and does not work. Apparently there are plans to
&lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=838540"&gt;support something like this&lt;/a&gt;. The totally fun thing, in my opinion, is
that m is an instance of a Map!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="second-approach-modifying-proto-after-instance-creation"&gt;
&lt;h2&gt;Second Approach (modifying __proto__ after instance creation)&lt;/h2&gt;
&lt;p&gt;My second approach was to generate a real Map and then override the
&lt;tt class="docutils literal"&gt;__proto__&lt;/tt&gt; to give it the properties I wanted:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;__proto__&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;__proto__&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toLowerCase&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
    &lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
    &lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aVal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aStr&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nx"&gt;aVal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;FOO&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// 1&lt;/span&gt;
&lt;span class="nx"&gt;m&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This actually works! But will &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=963519"&gt;throw a warning&lt;/a&gt; each time it is
created since changing an objects &lt;tt class="docutils literal"&gt;__proto__&lt;/tt&gt; is generally a bad idea.
I also thought of overriding individual methods, but this seemed
cumbersome and would increase the time in the constructor calls. (Which
occur during the start up of each account and is generally a resource
constrained time. No, I didn't profile this, it just seemed like bad
design.)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="solution-wrapping-a-map"&gt;
&lt;h2&gt;Solution (wrapping a Map)&lt;/h2&gt;
&lt;p&gt;Finally I settled on the simple solution of just wrapping the Map in a
custom object. Initially I thought this would be frustrating to
re-declare every function (and prone to breakage in the future if new
methods are added), but there's a nice magic method
&lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/noSuchMethod"&gt;__noSuchMethod__&lt;/a&gt; that fixes this! (Note that this is a
non-standard feature of SpiderMonkey.) &lt;tt class="docutils literal"&gt;__noSuchMethod__&lt;/tt&gt; allows an
object to intercept a call to a non-existent method (and in this case
call that same method on the internal Map object).&lt;/p&gt;
&lt;p&gt;Below is the final version that seems to act magically like a Map when
necessary (e.g. iterating the map works, all functions and properties
exist, the constructor works &lt;a class="footnote-reference" href="#id6" id="id3"&gt;[3]&lt;/a&gt;). I need to thank aleth (another chat
developer) who helped out quite a bit with this (and will ultimately be
reviewing this code)!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// A Map that automatically normalizes keys before accessing the values.&lt;/span&gt;
&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aNormalizeFunction&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aIt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;typeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aNormalizeFunction&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;function&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;NormalizedMap must have a normalize function!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;aNormalizeFunction&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;([[&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nx"&gt;val&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;val&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="nx"&gt;aIt&lt;/span&gt;&lt;span class="p"&gt;)]);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;NormalizedMap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="c1"&gt;// The function to apply to all keys.&lt;/span&gt;
  &lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;

  &lt;span class="c1"&gt;// Anything that accepts a key as an input needs to be manually overridden.&lt;/span&gt;
  &lt;span class="k"&gt;delete&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
  &lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
  &lt;span class="nx"&gt;has&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;has&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
  &lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aValue&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aKey&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nx"&gt;aValue&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;

  &lt;span class="c1"&gt;// Properties must be manually forwarded.&lt;/span&gt;
  &lt;span class="nx"&gt;get&lt;/span&gt; &lt;span class="nx"&gt;size&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;

  &lt;span class="c1"&gt;// Here&amp;#39;s where the magic happens. If a method is called that isn&amp;#39;t defined&lt;/span&gt;
  &lt;span class="c1"&gt;// here, just pass it to the internal _map object.&lt;/span&gt;
  &lt;span class="nx"&gt;__noSuchMethod__&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aId&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aArgs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;aId&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nx"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_map&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aArgs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The one downside of see of this is that properties must be declared
manually to forward to the internal &lt;tt class="docutils literal"&gt;_map&lt;/tt&gt; object. Maybe there is a
matching &lt;tt class="docutils literal"&gt;__noSuchProperty__&lt;/tt&gt; method I'm missing? Overall, I'm happy
with this solution, but please leave a comment if you can think of an
easier / better way to do this! (Or see a glaring way this will break!)&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;This is always a little bit of a sore subject in &lt;a class="reference external" href="irc://irc.mozilla.org/#instantbird"&gt;#instantbird&lt;/a&gt;
since we've had a variety of issues with this over the years. I think
we've fixed most of them at this point though!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id5" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;As I've &lt;a class="reference external" href="https://clokep.github.io/the-so-called-irc-specifications.html"&gt;written before&lt;/a&gt;, IRC tends to have crazy specifications.
In IRC, &lt;a class="reference external" href="https://tools.ietf.org/html/rfc2812#section-2.2"&gt;the characters of A-Z[]\~ are considered the upper case of a-z{}|^&lt;/a&gt;
(&amp;quot;because of IRC's Scandinavian origin&amp;quot;). Oh, also this can
change based on an &lt;a class="reference external" href="http://tools.ietf.org/html/draft-brocklesby-irc-isupport-03#section-3.1"&gt;ISUPPORT response&lt;/a&gt; from the server to pure ASCII or
RFC 1459 casemapping (A-Z[]\ map to a-z{}|). It seems like this could
theoretically change at any point on a live server too, although that
would be INSANE and I hope no one ever does that.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id6" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;I wrote some xpcshell tests to ensure these properties work as
expected, but they're uhh...not up anywhere yet though. Oops.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="IM"></category><category term="Instantbird"></category><category term="programming"></category><category term="specifications"></category><category term="Thunderbird"></category><category term="Wat"></category></entry><entry><title>Community and Volunteers</title><link href="https://clokep.github.io/community-and-volunteers.html" rel="alternate"></link><updated>2014-04-16T16:34:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2014-04-16:community-and-volunteers.html</id><summary type="html">&lt;p&gt;It was suggested that I cross-post this from mozilla.dev.planning onto
my blog. This is in reply to a thread entitled &amp;quot;&lt;a class="reference external" href="https://groups.google.com/forum/#%21topic/mozilla.dev.planning/P8oHKTCWSiQ"&gt;Proposal: Move
Thunderbird and SeaMonkey to mozilla-central&lt;/a&gt;&amp;quot; about (essentially)
merging comm-central back into mozilla-central. There have been many
technical concerns raised in the thread (that I'm not going to rehash
here). What I'm more interested in is the lack of community feeling
there. As Nicholas Nethercote said in that thread:&lt;/p&gt;
&lt;blockquote&gt;
&amp;quot;I am surprised [...] by how heartless the discussion has been.&amp;quot;&lt;/blockquote&gt;
&lt;p&gt;I should note that I did have some help editing this down from my
original post. Turns out I tend to write inflammatory statements that
don't help get me point across. Who knew? Anyway, thanks to all of you
who helped me out there!&lt;/p&gt;
&lt;p&gt;My full post is below (with a few links added and plaintext formatting
converted to HTML formatting):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;On Monday, April 14, 2014 4:52:53 PM UTC-4, Nicholas Nethercote
wrote:&lt;/p&gt;
&lt;p&gt;&amp;gt; The technical aspects of this decision have been discussed to death,
&amp;gt; so I won't say anything about that. I am surprised, however, by how
&amp;gt; heartless the discussion has been.&lt;/p&gt;
&lt;p&gt;I agree, the technical bitshere seem to have solutions suggested by
Joshua and others, but the non-technical parts of this discussion
have left mefeeling disheartened and confused with the Mozilla
community.&lt;/p&gt;
&lt;p&gt;I find it ironic/amusing/sad/upsetting that a few threads above this
is a thread entitled &amp;quot;&lt;a class="reference external" href="https://groups.google.com/forum/#!topic/mozilla.dev.planning/1kbZsYoQcng"&gt;Contributor pathways, engagement points and
bug mentoring&lt;/a&gt;&amp;quot; while in this thread I see community contributors
being blocked at every turn!&lt;/p&gt;
&lt;p&gt;Here I don't see people attempting to foster a community by putting
their best foot forward. I see people trying to get their &lt;strong&gt;job&lt;/strong&gt;
done; with an attitude of &amp;quot;if this doesn't help me, get it outta my
way!&amp;quot; I don't think this is the right way to grow a community. I
don't think this is how Mozilla HAS grown it's community. I don't
think it's in line with what Mozilla expects from it's community
members (both employees and volunteers!)&lt;/p&gt;
&lt;p&gt;Personally, I dislike the amount of Mozilla &lt;strong&gt;Corporation&lt;/strong&gt; goals
focus in this thread. Can we have a discussion aspart ofa larger
community? Why must it focus on Corporate goals? I'm not part of the
corporation, I don't really care what its goals are or are not. I
care about Mozilla, I care about providing high-quality, free, open
source softwareto improve the experience of the Internet for
everyone. And no, I'm not talking about Firefox. I'm talking about
Thunderbird. I understand that Mozilla's goals arecurrently Firefox
and Firefox OS, but these are not my personal goals.&lt;/p&gt;
&lt;p&gt;At the Summit I had a few conversations with people about
&amp;quot;on-boarding&amp;quot; new employees and getting them to understand how the
community works and that interacting with the community in a
positive manner is an important part of Mozilla. I don't remember
the exact context, but part of it wasthat it is important that new
employees don't think of it as &amp;quot;How can I &lt;em&gt;use&lt;/em&gt; the community?&amp;quot;, for
that implies taking advtange of them, but &amp;quot;How can I work with the
community?&amp;quot;&lt;/p&gt;
&lt;p&gt;Please don't see this as an &amp;quot;employees vs. volunteers&amp;quot; argument. I
believe that I'm expected to live up to these same goals. If I, as a
volunteer, can help an employee achieve his goals; I'm
[STRIKEOUT:more than willing], no...I'm EXPECTED to do that. I think
this is a two-way relationship that must be fostered. It has seemed
to me that over the past couple of years that I've been hanging
around here there's been less and less focus on the community and
more and more on the Corporation.&lt;/p&gt;
&lt;p&gt;I understand Thunderbird and SeaMonkey may not be important to you,
but it is important tome! (And otherswho contribute
totheThunderbird/SeaMonkey community, including employees who
contribute on their spare time.) When Mozilla stopped directly
supporting development of Thunderbird it was widely announced that
&amp;quot;Thunderbird is dead!&amp;quot;. We, as part of the Mozilla community, have
been fighting to prove this wrong.Could you please respect our
efforts? Merging c-c into m-c will help us focus our efforts on
building a great product instead of spending significant effort on
keeping a dying one on life-support. (And prove to all that
&amp;quot;Thunderbird is dead!&amp;quot; was just a sensational headline.)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I don't have much else to say beyond that (besides thanks for reading
this far!)&lt;/p&gt;
</summary><category term="community"></category><category term="crosspost"></category><category term="Mozilla"></category><category term="Thunderbird"></category></entry><entry><title>GSoc Lessons: Part Deux: The Arms Race</title><link href="https://clokep.github.io/gsoc-lessons-part-deux-the-arms-race.html" rel="alternate"></link><updated>2013-12-04T13:17:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2013-12-04:gsoc-lessons-part-deux-the-arms-race.html</id><summary type="html">&lt;p&gt;This post title might be a little excessive, but I'll blame &lt;a class="reference external" href="http://en.wikipedia.org/wiki/The_Sum_of_All_Fears_%28film%29"&gt;The Sum
of All Fears&lt;/a&gt; that I was watching last night. This is the second part
of a set of posts about ideas I heard at the Google Summer of Code 2013
Mentor Summit (you can read &lt;a class="reference external" href="https://clokep.github.io/gsoc-lessons-part-1-application-period.html"&gt;the first part about the application
process&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;This will explore an interesting anecdote I heard about the
interaction between applicants from another organization that, on
reflection, seemed to resonate somewhat with what I had seen in my
corner of the Mozilla community.&lt;/p&gt;
&lt;p&gt;The organization these students were applying to required patches to
be fixed for a student's application to be accepted (as discussed in my
previous post). For a particular project there existed multiple highly
motivated and skilled students, but only one slot. Thus, a &amp;quot;patch race&amp;quot;
of sorts occurred where the students competed by continually providing
more patches that were increasingly complex. (Note that this wasn't a in
response to a challenge from community members, it was a spontaneous
situation.) Once a single student started to submit extra patches the
other students felt they must also submit more patches to be considered
equal/superior (hence my allusion to an &amp;quot;&lt;a class="reference external" href="http://en.wikipedia.org/wiki/Arms_race#Nuclear_arms_race"&gt;arms race&lt;/a&gt;&amp;quot;).
Interestingly, they would also sometimes work on the same bug in a sort
of race to see who could fix it first.&lt;/p&gt;
&lt;p&gt;There's a couple things I took away from this:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Great, the project just had a lot of things fixed!&lt;/li&gt;
&lt;li&gt;The students were investing escalating amounts of time &lt;em&gt;during the
application phase&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;The students were not working in an open manner.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I won't really expand much more about the first point, it's always
good to fix things.&lt;/p&gt;
&lt;p&gt;Although submitting patches might showcase a student's skill, it also
relates to how much time the student is willing and able to put into the
application period. This, in particular, matters since different areas
of the world end their school year at different times. A student that
has already finished his semester during the application period may have
a lot of free time to attempt to get a GSoC slot (but will most likely
not have as much time during the actual summer!) This something that
mentors should keep in mind while reviewing applications.&lt;/p&gt;
&lt;p&gt;A downside of increasing amounts of time invested is that the
rejection is that much harder for both the mentor (especially if the
student is now part of the community!), as well as for the student who
has now vested a large amount of time in the project.&lt;/p&gt;
&lt;p&gt;The realization that actually upset me, however, is that these
students were not working in an open manner! Instead of collaborating,
they were competing! To me, this would set off a very poor tone for the
rest of GSoC. In fact, one of the biggest challenges I've had with GSoC
students is getting them to work in the open (i.e. &amp;quot;show me the code&amp;quot;,
anyone in &lt;a class="reference external" href="irc://irc.mozilla.org/#instantbird"&gt;#instantbird&lt;/a&gt; is probably tired of hearing me say that).&lt;/p&gt;
&lt;p&gt;At this point you &lt;em&gt;might&lt;/em&gt; think this is a hypothetical case I made up!
Upon letting it sink in and reflecting on it...I realized I had actually
seen similar situations during the application periods I've been
involved with. This year, we found a bug in Instantbird's IRC code (CTCP
quoting and dequoting); after referencing some &lt;a class="reference external" href="https://clokep.github.io/the-so-called-irc-specifications.html"&gt;specifications&lt;/a&gt;, I was
pretty quickly able to figure out the vague areas where people should
look for a fix. A couple of GSoC students in the room started looking
into it and exhibited a greatly reduced form of the behavior I discussed
above. The students were sharing information, but were not comfortable
sharing code. Unfortunately, this led to some very vague questions which
I was unable to answer (or answered incorrectly) and led to me coining
my catchphrase from above.&lt;/p&gt;
&lt;p&gt;I by no means think this reflects poorly on our students! I think this
is some what natural and expected for most students unfamiliar with open
development. (Extrapolating from my experiences in school...) Students
generally work individually (or in small groups) on projects and are
directly competing for grades (at least if the course is graded on a
curve). This would foster a sense of competition as opposed to
cooperation! Luckily the students working with us understood (with very
little prompting, I might add!) that we'd prefer they work together and
help each other. We were able to successfully fix the dequoting bug
(which then caused a bug in the quoting code to be visible...sigh...).&lt;/p&gt;
&lt;p&gt;My &lt;strong&gt;short take away&lt;/strong&gt; from all this: remember that students are not
yet a community and they're competing with each other until they've been
accepted. (And that they're used to competing, e.g. homework and exams,
not collaborating!) I don't really know whether I feel the above
situation is good or bad, but it's certainly an interesting effect from
the way the GSoC process works.&lt;/p&gt;
</summary><category term="community"></category><category term="GSoC"></category><category term="Mozilla"></category></entry><entry><title>GSoC Lessons: Part 1: Application Period</title><link href="https://clokep.github.io/gsoc-lessons-part-1-application-period.html" rel="alternate"></link><updated>2013-12-02T00:55:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2013-12-02:gsoc-lessons-part-1-application-period.html</id><summary type="html">&lt;p&gt;I briefly talked about &lt;a class="reference external" href="https://clokep.github.io/google-summer-of-code-mentor-summit-2013.html"&gt;my experiences&lt;/a&gt; at the Google Summer of Code
2013 Mentor Summit. I've been pretty remiss in sharing what was actually
discussed there and for that I must apologize! This will hopefully be
one of a few posts about what I learned and discussed at the Summit.&lt;/p&gt;
&lt;p&gt;The first part I'd like to talk about is the application period:
welcoming students, requirements for student applications, etc. Much of
what I say on here is just ideas I've heard other organizations
implement (with my personal opinion on them, please don't think this
represents what Mozilla is suggesting students do, or even what I'm
suggesting Mozilla should ask students to do!)&lt;/p&gt;
&lt;p&gt;I had many separate conversations about what is required for an
application to be accepted. It seems that Mozilla is actually on the
side of one of the easier organizations to apply to. We don't (to my
knowledge) require that students have contributed at all to the
community beforehand. It is possible that some smaller communities
inside of Mozilla require more than just an application, but there does
not seem to be any rule across Mozilla. I said I wouldn't offer my
opinion above...but I lied: I think Mozilla should make it clearer to
applicants what is expected of them before the application.&lt;/p&gt;
&lt;p&gt;There seem to be a variety of things different organizations &amp;quot;require&amp;quot;
before accepting a student application, for example:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A patch / pull request&lt;/li&gt;
&lt;li&gt;IRC / email involvement / idling&lt;/li&gt;
&lt;li&gt;File a bug (I mean this in the &amp;quot;Mozilla&amp;quot; sense: an actual bug, a
feature request, etc.)&lt;/li&gt;
&lt;li&gt;Fix a bug / make a commit&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I think all of these have pros and cons and making any a hard and fast
rule would probably be a bad idea. Personally for Instantbird, we
greatly encourage students to idle on IRC and get to know us; and to fix
a minor bug or two or three. What I'm always looking for is: use,
passion, and skill.&lt;/p&gt;
&lt;p&gt;Asking for a &lt;strong&gt;patch / pull request&lt;/strong&gt; (I include these together since
they really just depend on how an organization accepts changes) can be a
bit intimidating for a new user. I think this can be a pretty rough
thing to ask for new contributors that might not want to share their
work publicly with a large group of people (on a mailing list, public
bug tracker, etc.) where they might be wrong. Even after being part of
the community, I find that GSoC students are often very unwilling to
publicly share code unless it's &amp;quot;perfect&amp;quot;, but I digress. Anyway, if
you're considering &amp;quot;requiring&amp;quot; this, I think it should be pretty clear
that this changeset doesn't need to be &lt;em&gt;perfect&lt;/em&gt;, it just needs to show
that the student is able to read code, understand a bug report, provide
a fix and test it.&lt;/p&gt;
&lt;p&gt;I think it's perfect reasonable to ask students to &lt;strong&gt;idle on IRC and
join mailing lists&lt;/strong&gt;. They should definitely be trying to understand the
community before attempting to join it. It isn't just a matter of if the
community thinks the student would be a good fit, but also the student
must ensure they can fit into the community.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Filing a bug&lt;/strong&gt; is a great way for a student to show a few different
things: they've used your software; they've used your software enough to
find a bug in it (and there most likely is one!); they're able to
express themselves in a clear and concise matter. If you're lucky
they'll find something that actually annoys them and fix it themselves!&lt;/p&gt;
&lt;p&gt;I have &lt;strong&gt;fix a bug&lt;/strong&gt; listed last. You might ask how this differs from
submitting a patch...and it does! Fixing a bug requires a patch to go
through whatever review process your project uses, but builds upon just
submitting a patch. My thoughts on this are pretty similar to just
submitting a patch, but it depends on how large the bug is.&lt;/p&gt;
&lt;p&gt;Something I found interesting is that almost everyone I talked to
didn't treat their GSoC students any differently than they would treat a
new contributor to their project. They still had to prove they were
worthy of commit access, etc. Is there anything else you ask of your
students before they apply to GSoC? I'd love to hear it!&lt;/p&gt;
&lt;p&gt;Some other topics I'll hopefully find some time to write about
include: community lessons, and handling a failing student. The
community one will be very not-GSoC focused and could apply to just
trying to incorporate new contributors...but I'll include it in this
series.&lt;/p&gt;
</summary><category term="community"></category><category term="GSoC"></category><category term="Mozilla"></category></entry><entry><title>Google Summer of Code Mentor Summit 2013</title><link href="https://clokep.github.io/google-summer-of-code-mentor-summit-2013.html" rel="alternate"></link><updated>2013-10-21T02:18:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2013-10-21:google-summer-of-code-mentor-summit-2013.html</id><summary type="html">&lt;p&gt;Not only was I lucky enough to mentor a great student for this year's
Google Summer of Code, but Mozilla asked me to represent them at the
Google Summer of Code Mentor Summit!&amp;nbsp; This was located at Google's
offices in Mountain View, California this past weekend (Friday, Oct.
18th - Sunday, Oct. 20th, 2013).&lt;/p&gt;
&lt;p&gt;Before actually heading over to the Summit, &lt;a class="reference external" href="http://mykzilla.org/"&gt;Myk Melez&lt;/a&gt; and &lt;a class="reference external" href="http://nickdesaulniers.github.io/"&gt;Nick
Desaulniers&lt;/a&gt; were kind enough to show me around the Mozilla Mountain
View office!&amp;nbsp; (Thanks to Daniel Holbert for setting that up!)&lt;/p&gt;
&lt;p&gt;The GSoC Mentor Summit is run as an &amp;quot;unconference&amp;quot;, the open sessions
were chosen by conference attendees and run as discussions with no
keynote speakers.&amp;nbsp; This was an interesting experience and how good each
session was varied quite a bit by who was taking part in the discussion,
but overall it was great to hear the experiences of other projects with
their GSoC students, as well as to hear about lots of projects I had
never heard of before!&amp;nbsp; In general the session I attended were about
community building and managing GSoC students, I took lots of notes and
will digest all of this in further detail at some point.&lt;/p&gt;
&lt;p&gt;I was able to meet lots of great people from different projects, just
a few of which were: &lt;a class="reference external" href="http://pidgin.im/"&gt;Pidgin&lt;/a&gt;, &lt;a class="reference external" href="http://www.debian.org/"&gt;Debian&lt;/a&gt;, &lt;a class="reference external" href="http://buildbot.net/"&gt;Buildbot&lt;/a&gt;, the &lt;a class="reference external" href="http://www.opendmx.net/"&gt;Open
Lighting Project&lt;/a&gt;, the &lt;a class="reference external" href="https://www.torproject.org/"&gt;Tor Project&lt;/a&gt;, &lt;a class="reference external" href="https://www.phpbb.com/%E2%80%8E"&gt;phpBB&lt;/a&gt;, etc.&amp;nbsp; Unfortunately
being from Mozilla, most people already know what you do...or they think
you do at least!&amp;nbsp; Many people were surprised when I said I work on
Thunderbird and Instantbird.&amp;nbsp; I heard &amp;quot;Thunderbird is dead&amp;quot; at least
twenty times, which was quite disappointing that those in the open
source community don't even understand the current status of
Thunderbird.&amp;nbsp; Many were happy to hear that it is still being maintained
and developed by the community, however.&amp;nbsp; I even had some people thank
me (which I don't really deserve) for helping to continue maintain
Thunderbird!&amp;nbsp; It was great to hear things like this at the Mozilla
Summit, but it was really invigorating to hear people outside of the
Mozilla community excited that their favorite email client was still
being developed.&lt;/p&gt;
&lt;p&gt;People were further surprised to hear that Thunderbird now includes
instant messaging / chat (since Thunderbird 15 or 17) and that there is
a Gecko based instant messaging client: Instantbird.&amp;nbsp; It seemed like
some people were excited by this and hopefully they'll try it out!&lt;/p&gt;
&lt;p&gt;Anyway, I've gone a little off-topic, but overall the Mentor Summit
was great and I'd like to thank both Mozilla and Google for giving me
this opportunity.&amp;nbsp; If I find any really great gems in my notes I'll
write further blog posts about them.&lt;/p&gt;
</summary><category term="Google"></category><category term="GSoC"></category><category term="Mozilla"></category></entry><entry><title>Yahoo Protocol Google Summer of Code Round-up</title><link href="https://clokep.github.io/yahoo-protocol-google-summer-of-code-round-up.html" rel="alternate"></link><updated>2013-10-06T13:18:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2013-10-06:yahoo-protocol-google-summer-of-code-round-up.html</id><summary type="html">&lt;p&gt;I have to apologize to my student, &lt;a class="reference external" href="http://phaseshiftsoftware.com/blog/"&gt;Quentin&lt;/a&gt; (aka qheaden on IRC),
for taking so long to write this...but anyway: Google Summer of Code
2013 is over!&amp;nbsp; Quentin has done a great job working at implementing the
Yahoo Protocol for Instantbird (and Thunderbird) in JavaScript
(henceforth called &amp;quot;JS-Yahoo&amp;quot;).&amp;nbsp; It's at the point where it has mostly
reached feature-parity with the libpurple plug-in.&amp;nbsp; Before &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=2135"&gt;turning this
on as default&lt;/a&gt; there are a few minor bugs that still need to be fixed,
but most of them have patches that just need another couple iterations.&lt;/p&gt;
&lt;div class="section" id="where-do-we-go-from-here"&gt;
&lt;h2&gt;Where do we go from here?&lt;/h2&gt;
&lt;p&gt;Once the last few bugs are fixed we'll enable Yahoo by default in the nightly
builds and, assuming we have no issues, it will be enabled by default in the
upcoming Instantbird 1.5. If there are no major issues in 1.5, we'll remove the
libpurple Yahoo implementation for Instantbird 1.next.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="how-do-i-try-this-now"&gt;
&lt;h2&gt;How do I try this now?!&lt;/h2&gt;
&lt;p&gt;You can already easily enable JS-Yahoo in &lt;a class="reference external" href="http://nightly.instantbird.im/"&gt;Instantbird nightly builds&lt;/a&gt;:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Type /about config in a conversation tab's textbox&lt;/li&gt;
&lt;li&gt;Type &amp;quot;forcePurple&amp;quot; in the search box&lt;/li&gt;
&lt;li&gt;Remove &amp;quot;prpl-yahoo&amp;quot; and &amp;quot;prpl-yahoojp&amp;quot; from this comma separated list
of values (you can also remove prpl-jabber if you want to always use
the JS-XMPP implementation from GSoC 2011! Note that this doesn't
support &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=14328"&gt;DNS SRV&lt;/a&gt;, however.)&lt;/li&gt;
&lt;li&gt;Restart Instantbird!&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You should now be using the JS-Yahoo protocol.&amp;nbsp; Hopefully you don't
notice anything different, but &lt;a class="reference external" href="https://bugzilla.instantbird.org/"&gt;PLEASE file bugs&lt;/a&gt; if you see any
issues.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="how-come-i-can-t-use-this-in-thunderbird"&gt;
&lt;h2&gt;How come I can't use this in Thunderbird?!&lt;/h2&gt;
&lt;p&gt;Because Instantbird and comm-central development don't happen in the same
Mercurial repository.&amp;nbsp; I'm working on &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=920801"&gt;syncing the chat/ folder of these
repositories&lt;/a&gt; currently and JS-Yahoo should be in Daily soon to be
included in the next Thunderbird release (i.e. Thunderbird 31).&lt;/p&gt;
&lt;p&gt;The whole Instantbird community has been super happy with the progress
Quentin made and we hope that Quentin has learned a lot! Thanks for a
great summer qheaden and hopefully we'll see you around still!&lt;/p&gt;
&lt;/div&gt;
</summary><category term="chat"></category><category term="GSoC"></category><category term="IM"></category><category term="instant messaging"></category><category term="Instantbird"></category><category term="Yahoo"></category></entry><entry><title>Mentoring Google Summer of Code 2013</title><link href="https://clokep.github.io/mentoring-google-summer-of-code-2013.html" rel="alternate"></link><updated>2013-06-28T22:05:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2013-06-28:mentoring-google-summer-of-code-2013.html</id><summary type="html">&lt;p&gt;I'm officially a mentor this year for &lt;a class="reference external" href="http://www.google-melange.com/gsoc/homepage/google/gsoc2013"&gt;2013's Google Summer of Code&lt;/a&gt;.
I'm a bit late on posting this, but oh well! My student this year is
&lt;a class="reference external" href="http://phaseshiftsoftware.com/"&gt;Quentin Headen&lt;/a&gt; who is &lt;a class="reference external" href="http://www.google-melange.com/gsoc/project/google/gsoc2013/qheaden/26001"&gt;working on&lt;/a&gt; a &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Yahoo!_Messenger_Protocol"&gt;Yahoo! Messenger protocol&lt;/a&gt;
for the Instantbird chat/ backend (so it'll also be usable via
Thunderbird). You can see &lt;a class="reference external" href="http://phaseshiftsoftware.com/blog/category/gsoc-2013-logs/"&gt;an account of his trials, successes and
trepidations&lt;/a&gt; (&lt;a class="reference external" href="http://phaseshiftsoftware.com/blog/category/gsoc-2013-logs/feed/"&gt;RSS&lt;/a&gt;) or follow his &lt;a class="reference external" href="https://bitbucket.org/qheaden/instantbird-gsoc-2013"&gt;code repository&lt;/a&gt;. He's made
great progress so far and is able to connect, download all the buddies
and start private conversations! Not too bad for a few weeks of work!
We've been keeping a &lt;a class="reference external" href="https://etherpad.mozilla.org/ELTNA6O44F"&gt;TODO list&lt;/a&gt; of things to be supported, please
don't edit it without discussing it with us first.&lt;/p&gt;
&lt;p&gt;Our hope is to get this checked into Instantbird by the end of summer
and run it in parallel (behind an &lt;a class="reference external" href="about:config"&gt;about:config&lt;/a&gt; preference) with the
current libpurple Yahoo implementation. Once we're satisified that it
has feature parity we'll remove the libpurple version and enable this by
default!&lt;/p&gt;
&lt;p&gt;Instantbird is also supporting two other projects:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;The &lt;a class="reference external" href="http://www.google-melange.com/gsoc/project/google/gsoc2013/nhnt11/7001"&gt;&amp;quot;Awesometab&amp;quot;&lt;/a&gt; is being done by &lt;a class="reference external" href="http://awesometab.blogspot.com/"&gt;Nihanth Subramanya&lt;/a&gt;
(&lt;a class="reference external" href="http://awesometab.blogspot.com/feeds/posts/default?alt=rss"&gt;RSS&lt;/a&gt;)
and being mentored by Benedikt Pfeifer, his code is &lt;a class="reference external" href="https://bitbucket.org/nhnt11/instantbird-addons"&gt;available&lt;/a&gt; and
some has already been &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/55009d68c4ec"&gt;checked&lt;/a&gt; &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/46ee5c836e48"&gt;into&lt;/a&gt; &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/52401d522970"&gt;Instantbird&lt;/a&gt; &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/ea36babac4be"&gt;nightlies&lt;/a&gt;!&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.google-melange.com/gsoc/project/google/gsoc2013/atuljangra/68001"&gt;FileLinks in IM&lt;/a&gt; is being worked on by &lt;a class="reference external" href="http://atuljangra.tumblr.com/"&gt;Atul Jangra&lt;/a&gt; (or &lt;a class="reference external" href="http://gsoc-mozilla.tumblr.com/"&gt;maybe&lt;/a&gt;)
(&lt;a class="reference external" href="http://atuljangra.tumblr.com/rss"&gt;RSS&lt;/a&gt; /
&lt;a class="reference external" href="http://gsoc-mozilla.tumblr.com/rss"&gt;RSS&lt;/a&gt;) and being mentored by
Florian Quze, check out the &lt;a class="reference external" href="https://bitbucket.org/atuljangra/instantbird-gsoc-2013"&gt;repository&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can find any of us in #instantbird on irc.mozilla.org, my nick is
clokep, Quentin's is qheaden, Nihanth's: nhnt11, Atul's: atuljangra,
Benedikt goes by Mic and Florian goes by something starting with &amp;quot;flo&amp;quot;.&lt;/p&gt;
&lt;p&gt;Thanks also go out to Mozilla for letting us participate in Google
Summer of Code with them again! You can see all of the accepted projects
in &lt;a class="reference external" href="http://blog.gerv.net/2013/06/gsoc-2013-project-list/"&gt;Gerv's blogpost&lt;/a&gt;.&lt;/p&gt;
</summary><category term="chat"></category><category term="GSoC"></category><category term="IM"></category><category term="instant messaging"></category><category term="Instantbird"></category><category term="Yahoo"></category></entry><entry><title>Instantbird 1.4 Released!</title><link href="https://clokep.github.io/instantbird-14-released.html" rel="alternate"></link><updated>2013-05-20T20:45:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2013-05-20:instantbird-14-released.html</id><summary type="html">&lt;p&gt;After a bunch of l10n build problems, we've finally released
Instantbird 1.4, which includes updates to libpurple 2.10.7 and Mozilla
20.&amp;nbsp; In particular this includes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Updated Twitter code that uses v1.1 of their API (v1.0 will be
disabled on June 11th, 2013).&lt;/li&gt;
&lt;li&gt;Better character counter for Twitter (it now takes into account if
URLs are embedded).&lt;/li&gt;
&lt;li&gt;Updated log viewer which organizes logs by date (and nests them by
week, month, etc.)&lt;/li&gt;
&lt;li&gt;Better support for IRC bouncers.&lt;/li&gt;
&lt;li&gt;Support for overriding self-signed/invalid/out-of-date certificates
for IRC.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you've been using some other instant messaging client (e.g. Pidgin
or Adium); I'd highly suggest giving Instantbird a try, especially if
you also go on IRC. Instantbird has great IRC support! (And...if you do
have issues, feel free to ping me in #instantbird on irc.mozilla.org and
let me know what your issue is.)&lt;/p&gt;
&lt;p&gt;You can download it &lt;a class="reference external" href="http://www.instantbird.com/download-all.html"&gt;here&lt;/a&gt;, or view the full &lt;a class="reference external" href="http://www.instantbird.com/release-notes.html"&gt;release notes&lt;/a&gt;.&lt;/p&gt;
</summary><category term="Instantbird"></category></entry><entry><title>JavaScript typed arrays pain</title><link href="https://clokep.github.io/javascript-typed-arrays-pain.html" rel="alternate"></link><updated>2012-11-29T03:11:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2012-11-29:javascript-typed-arrays-pain.html</id><summary type="html">&lt;p&gt;If you've ever tried to deal with binary data in JavaScript you know
it isn't much fun and you usually resort to using strings lots of
charCodeAt and related functions.&amp;nbsp; &lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays"&gt;Typed arrays&lt;/a&gt; are supposed to solve
this though!&amp;nbsp; The typed array API consists of creating a buffer of bytes
(called an &lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBuffer"&gt;ArrayBuffer&lt;/a&gt;) and then manipulating those bytes via
different views (&lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBufferView"&gt;ArrayBufferView&lt;/a&gt;s).&amp;nbsp; You can have multiple views of
the same buffer, starting at different offsets, of different lengths and
types...which is all neat from a technical point of view, but is it
really useful?&amp;nbsp; It is kind of nice working with the views as if they
were normal arrays though.&lt;/p&gt;
&lt;p&gt;I've been playing with these ArrayBuffers quite a bit as I'm working
on an implementation of the &lt;a class="reference external" href="http://en.wikipedia.org/wiki/OSCAR_protocol"&gt;OSCAR protocol&lt;/a&gt; (used for &lt;a class="reference external" href="http://en.wikipedia.org/wiki/AOL_Instant_Messenger"&gt;AOL Instant
Messenger&lt;/a&gt; and &lt;a class="reference external" href="http://en.wikipedia.org/wiki/ICQ"&gt;ICQ&lt;/a&gt;) in the chat backend (for Instantbird /
Thunderbird).&amp;nbsp; (As an aside, the OSCAR protocol Wikipedia page has
surprisingly good documentation of some of the underlying data
structures of the protocol...)&amp;nbsp; I started by writing some test code
using ArrayBuffers and views, which have been around a while: since
Gecko 2.0 in fact!&amp;nbsp; I quickly ran into some tedious issues with
repetitive code such as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * A TLV (Type, Length and Value) data structure:&lt;/span&gt;
&lt;span class="cm"&gt; *  Unsigned Short  type    Describes what the value represents.&lt;/span&gt;
&lt;span class="cm"&gt; *  Unsigned Short  length  The length of the data block.&lt;/span&gt;
&lt;span class="cm"&gt; *  Bytes           value   The raw payload.&lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; * The overall length of a TlvBlock is length + 4.&lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; * The inputs to this are:&lt;/span&gt;
&lt;span class="cm"&gt; *  aType    The type of the TLV Block.&lt;/span&gt;
&lt;span class="cm"&gt; *  aValue   An ArrayBuffer containing the data.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;TlvBlock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aType&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aValue&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;ArrayBuffer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aValue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;byteLength&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="c1"&gt;// The first two bytes are unsigned shorts.&lt;/span&gt;
  &lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;view&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Uint16Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="nx"&gt;view&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;aType&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="nx"&gt;view&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;aValue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;byteLength&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// The rest just gets the data copied into it.&lt;/span&gt;
  &lt;span class="nx"&gt;view&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Uint8Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="nx"&gt;view&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Uint8Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aValue&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This actually illustrates two annoying issues I have:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;I end up with extra lines of code defining a new view every time I
switch data types.&lt;/li&gt;
&lt;li&gt;There's no simple way to copy an ArrayBuffer into a part of an
ArrayBuffer. In the above example I create a Uint8Array view of the
target location, a Uint8Array view of the source location and then
set the source to the target. Seems simple once you figure it out,
but it took a while to figure out.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;(As an aside, some of you might find the following function helpful,
it is essentially a &lt;a class="reference external" href="http://en.cppreference.com/w/cpp/string/byte/memcpy"&gt;memcpy&lt;/a&gt; for ArrayBuffers...this isn't really
tested heavily at all, however.)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * aTarget / aSource are ArrayBuffers&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;copyBytes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aTarget&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aSource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aTargetOffset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aSourceOffset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aLength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;aSource&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;byteLength&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// The rest just gets the data copied into it.&lt;/span&gt;
  &lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;view&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Uint8Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aTarget&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aTargetOffset&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="nx"&gt;view&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;Uint8Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aSource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aSourceOffset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;aLength&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;OK, so typed arrays seem good, but kind of annoying, right?
Wrong...the OSCAR protocol is a &amp;quot;network order&amp;quot; protocol (aka it is big
endian). At this point you're probably thinking &amp;quot;OK, so the ArrayBuffer
constructor must take an endianess flag!&amp;quot;&amp;nbsp; Wrong, it does no such
thing.&amp;nbsp; &amp;quot;Hmmm...Well do the ArrayBufferViews take an endianess flag?&amp;quot;
Nope, wrong again.&amp;nbsp; The only way to specify the endianess of the data is
to use a &lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/DataView"&gt;DataView&lt;/a&gt;, a slightly different interface to the underlying
bytes.&amp;nbsp; It offers an API to individually set different data elements via
their offset and endianess.&amp;nbsp; (If you're too lazy to read the
documentation all the way through, DataView assumes big endian: makes my
life easier!)&lt;/p&gt;
&lt;p&gt;For the curious, JavaScript typed arrays use the system endianess,
which in my opinion is pretty much useless (at least if you plan on
sharing data) since you can never guarantee the endianess to be either
big or little endian.&amp;nbsp; (The fun part is that this isn't even documented,
I found it on &lt;a class="reference external" href="http://stackoverflow.com/questions/7869752/javascript-typed-arrays-and-endianness"&gt;Stack Overflow&lt;/a&gt; and verified.)&lt;/p&gt;
&lt;p&gt;So, in summary...if you plan on networking at all with ArrayBuffers,
don't use ArrayBufferViews, use DataViews.&amp;nbsp; (Although Uint8Arrays and
Int8Arrays should work fine!)&lt;/p&gt;
&lt;p&gt;And to not rant the &lt;em&gt;entire&lt;/em&gt; time, working with typed arrays certainly
does beat strings + charCodeAt!&lt;/p&gt;
</summary><category term="IM"></category><category term="Instantbird"></category><category term="Mozilla"></category><category term="OSCAR"></category><category term="Thunderbird"></category><category term="Wat"></category></entry><entry><title>Instantbird 1.3 Released!!!</title><link href="https://clokep.github.io/instantbird-13-released.html" rel="alternate"></link><updated>2012-11-16T10:42:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2012-11-16:instantbird-13-released.html</id><summary type="html">&lt;p&gt;Well we finally got our release process down a bit better and were
able to do a quicker release (from 1.2 to 1.3, compared to our previous
few releases). This is great news, as it gives incremental changes to
our users faster!&amp;nbsp; There's some new features available, which are mostly
covered on the &lt;a class="reference external" href="http://blog.instantbird.org/2012/11/instantbird-1-3-released/"&gt;Instantbird blog&lt;/a&gt;, but quickly:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;IRC now supports SASL authentication, which is required by Freenode
when connecting from Tor or certain IP ranges.&lt;/li&gt;
&lt;li&gt;Long messages over IRC are now smartly chopped and sent as multiple
messages (instead of being truncated).&lt;/li&gt;
&lt;li&gt;The &amp;quot;Show Nick&amp;quot; add-on was integrated: this allows styling of a
mentioned nick in a conversation (and is extremely useful for
following multiple conversations).&lt;/li&gt;
&lt;li&gt;Various other minor improvements...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Instantbird 1.3 is based off of Mozilla 16.0.2, but I believe we're
hoping to update to mozilla-central soon in order to benefit from cool
new technologies, like WebRTC!&amp;nbsp; You should &lt;a class="reference external" href="http://www.instantbird.com/download-all.html"&gt;check out Instantbird&lt;/a&gt; now!&lt;/p&gt;
</summary><category term="Instantbird"></category></entry><entry><title>On Status</title><link href="https://clokep.github.io/on-status.html" rel="alternate"></link><updated>2012-10-17T01:33:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2012-10-17:on-status.html</id><summary type="html">&lt;p&gt;Something that comes up often about Instantbird is why we only support
three statuses: Available, Unavailable and Offline.&amp;nbsp; (We do actually
support a fourth one too, Idle, but that is set automatically, not
chosen by the user.)&amp;nbsp; Frequently this discussion is in the context of
wanting an &amp;quot;Invisible&amp;quot; status, but I'll get to that later...&lt;/p&gt;
&lt;p&gt;Many users have talked to us on IRC, email or via bugs and complained
about wanting an &amp;quot;Away&amp;quot; status or a &amp;quot;Do Not Disturb&amp;quot; status.&amp;nbsp; There's a
few issues with this:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;What's really the difference between &amp;quot;Unavailable&amp;quot;, &amp;quot;Away&amp;quot; and &amp;quot;Do
Not Disturb&amp;quot;?&amp;nbsp; Do you really need to choose them individually?
(Other things that fit into here: &amp;quot;Not at my desk&amp;quot;, &amp;quot;on the phone&amp;quot;,
&amp;quot;busy&amp;quot;, &amp;quot;stepped out&amp;quot;.&amp;nbsp; It is amazing how some protocols have so many
ways to describe being unavailable!)&lt;/li&gt;
&lt;li&gt;A technical issue that we often run into is trying to shoehorn
different protocol implementations into our abstract protocol
interface.&amp;nbsp; (We already have some fairly complicated interfaces
around joining chat rooms, creating different account, etc. because
of this.)&lt;/li&gt;
&lt;li&gt;Setting yourself as &amp;quot;Away&amp;quot; or &amp;quot;Invisible&amp;quot; is a lie.&amp;nbsp; Perhaps this is
me being overly idealistic, but why would you set yourself as
&amp;quot;Away&amp;quot;?&amp;nbsp; It seems that this is something that should be done
automatically (when you lock your display, perhaps?).&amp;nbsp; You can't be
&amp;quot;Away&amp;quot; and using your computer at the same time!
Again, perhaps being idealistic, but what is the point of the
&amp;quot;Invisible&amp;quot; status?&amp;nbsp; If you wish to be hidden from someone
(everyone?) why not just block those users.&amp;nbsp; Or ignore them when they
send you a message.&amp;nbsp; If you are busy, set yourself to &amp;quot;Unavailable&amp;quot;
and people should understand that they should not talk to you...if
they don't, well...do you really want them talking to you ever?&amp;nbsp; (Are
they really your friend?&amp;nbsp; I guess you don't get to choose your
co-workers, but still.)&amp;nbsp; Now, perhaps this is just my opinion as
being someone who never really hard an &amp;quot;Invisible&amp;quot; status (I actually
remember it being added to the AIM client at some point).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;At this point you probably don't believe me that there's really &lt;em&gt;that&lt;/em&gt;
many different protocol statuses out there, so I figured I'd illustrate
a few protocols in a matrix.&amp;nbsp; Note that this isn't meant to be
exhaustive, just to show how complicated of a situation this really is.
All protocols can obviously be &amp;quot;offline&amp;quot; as well, but that's not shown
in the table.&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="30%" /&gt;
&lt;col width="13%" /&gt;
&lt;col width="21%" /&gt;
&lt;col width="17%" /&gt;
&lt;col width="19%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class="head"&gt;Available&lt;/th&gt;
&lt;th class="head"&gt;Unavailable&lt;/th&gt;
&lt;th class="head"&gt;Phone&lt;/th&gt;
&lt;th class="head"&gt;Invisible&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Oscar (AIM/ICQ)&lt;/td&gt;
&lt;td&gt;Online&lt;/td&gt;
&lt;td&gt;Away&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;td&gt;Invisible&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;IRC&lt;/td&gt;
&lt;td&gt;Online&lt;/td&gt;
&lt;td&gt;Away&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Microsoft Lync&lt;/td&gt;
&lt;td&gt;Online&lt;/td&gt;
&lt;td&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;Busy&lt;/li&gt;
&lt;li&gt;Away&lt;/li&gt;
&lt;li&gt;In a meeting&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;In a call&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Yahoo! Messenger&lt;/td&gt;
&lt;td&gt;Available&lt;/td&gt;
&lt;td&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;Busy&lt;/li&gt;
&lt;li&gt;Stepped out&lt;/li&gt;
&lt;li&gt;Be right back&lt;/li&gt;
&lt;li&gt;Not at my desk&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;On the phone&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Windows Live Messenger&lt;/td&gt;
&lt;td&gt;Online&lt;/td&gt;
&lt;td&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;Busy&lt;/li&gt;
&lt;li&gt;Away&lt;/li&gt;
&lt;li&gt;Be Right Back&lt;/li&gt;
&lt;li&gt;Out to lunch&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;On the phone&lt;/td&gt;
&lt;td&gt;Appear offline&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;XMPP (e.g. Google Talk)&lt;/td&gt;
&lt;td&gt;Available&lt;/td&gt;
&lt;td&gt;Busy&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</summary><category term="chat"></category><category term="IM"></category><category term="instant messaging"></category><category term="Instantbird"></category><category term="messaging"></category><category term="status"></category><category term="Thunderbird"></category></entry><entry><title>Instantbird 1.2 Released (with awesome new IRC features)!</title><link href="https://clokep.github.io/instantbird-12-released-with-awesome-new-irc-features.html" rel="alternate"></link><updated>2012-08-08T17:08:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2012-08-08:instantbird-12-released-with-awesome-new-irc-features.html</id><summary type="html">&lt;p&gt;If you haven't seen the announcement...&lt;a class="reference external" href="http://blog.instantbird.org/2012/08/instantbird-1-2-released/"&gt;Instantbird 1.2 has been
released&lt;/a&gt;!&amp;nbsp; It's got a ton of great new features that I'm excited for:
&lt;a class="reference external" href="http://blog.instantbird.org/2012/08/tab-completion-in-instantbird-1-2/"&gt;better tab complete&lt;/a&gt;, a marker showing the last viewed messages,
support for Bonjour and more.&amp;nbsp; But the most exciting bits to me are our
JavaScript implementations of &lt;a class="reference external" href="http://lxr.instantbird.org/instantbird/source/chat/protocols/xmpp/"&gt;XMPP&lt;/a&gt; (used for &lt;a class="reference external" href="http://lxr.instantbird.org/instantbird/source/chat/protocols/facebook/"&gt;Facebook Chat&lt;/a&gt; and
&lt;a class="reference external" href="http://lxr.instantbird.org/instantbird/source/chat/protocols/gtalk/"&gt;GTalk&lt;/a&gt;, so far) and &lt;a class="reference external" href="http://lxr.instantbird.org/instantbird/source/chat/protocols/irc/"&gt;IRC&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Why am I so excited for them? Mostly because they're extendable!
(Well...and I guess because I wrote most of the IRC code.) I've
&lt;a class="reference external" href="https://clokep.github.io/irc-auto-performs.html"&gt;written&lt;/a&gt; a bit about this before for IRC...but it will let add-ons do
whatever they want to the IRC protocol.&amp;nbsp; You should check out the
implementations (links above), they're very hackable.&amp;nbsp; Hopefully we can
remove libpurple XMPP and fully switch to Instantbird's XMPP for the
next release, once a few &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=14328"&gt;Mozilla bugs&lt;/a&gt; are fixed.&lt;/p&gt;
&lt;p&gt;Did I also mention that these implementations (including the raw XMPP
and Twitter, which Instantbird has supported since 1.0) are going to be
included in &lt;a class="reference external" href="http://www.mozilla.org/en-US/thunderbird/"&gt;Thunderbird&lt;/a&gt;15, as part of it's new &lt;a class="reference external" href="https://wiki.mozilla.org/Modules/Chat"&gt;chat feature&lt;/a&gt;?
Florian has done a great job of integrating our chat code there and it
gives quite a different user experience than Instantbird, so don't be
worried about Instantbird going away!&lt;/p&gt;
&lt;p&gt;Now of course, we always think of the future here (after all,
releasing itself isn't really exciting when most of the features have
been in nightly builds...forever), so we started making a list of some
of the stuff we'd like to implement in future Instantbirds, you can
check it out &lt;a class="reference external" href="https://etherpad.mozilla.org/ib-1-3"&gt;here&lt;/a&gt;. Some of them are very exciting, feel free to grab
one and work on it.&lt;/p&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category></entry><entry><title>IRC Auto-Performs</title><link href="https://clokep.github.io/irc-auto-performs.html" rel="alternate"></link><updated>2012-06-11T02:25:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2012-06-11:irc-auto-performs.html</id><summary type="html">&lt;p&gt;There have been a &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=742675"&gt;few&lt;/a&gt; &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=1101"&gt;requests&lt;/a&gt; to support &amp;quot;auto-performs&amp;quot;
(sending commands to the IRC server after connection that the user types
into a box or whatever). Personally I find this to be:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;A fairly awful user experience.&lt;/li&gt;
&lt;li&gt;Confusing to new users.&lt;/li&gt;
&lt;li&gt;Unnecessary.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I additionally don't like this idea since it requires us to have
commands for all the common tasks you'd want to do in an auto-perform
(or support sending absolutely raw messages to the server, which we
actually do already in the /quote command). Essentially what I just
described is writing our own scripting language...that seems pointless
(and frankly, I have better things to do). I'm hoping to convince you
with this post (and maybe a series of posts) that auto-performs aren't
necessary and a trivial restartless extension can replace them.&lt;/p&gt;
&lt;div class="section" id="design"&gt;
&lt;h2&gt;Design&lt;/h2&gt;
&lt;p&gt;Part of the desire to &lt;a class="reference external" href="https://clokep.github.io/why-rewrite-the-irc-protocol-plugin-part-2.html"&gt;replace the libpurple IRC protocol plugin&lt;/a&gt;
with a new JavaScript one built specifically for Instantbird (which is
also now used in Thunderbird!) was to make the protocol fully
extensible. There are &lt;a class="reference external" href="https://clokep.github.io/the-so-called-irc-specifications.html"&gt;many revisions and unofficial extensions to IRC&lt;/a&gt;
and we might not necessarily want to support them all (especially if
they only apply to a single network). Allowing all parts of the protocol
implementation to be touched and extended seemed like a great way to
handle this.&lt;/p&gt;
&lt;p&gt;Initially I tried to do this by making the IRC account into an XPCOM
component (well it is one already, it's an prplIAccount, but I meant an
IRC specific one: implementing ircIAccount, if you will). Unfortunately,
this seemed to have a lot of overhead and got complicated extremely
quickly. Anything I'd want to touch from a message handler (wait,
wait...what's a handler?! I'll get back to that) would need to have
methods written and exposed to access internal data of the
account...does that sound very extensible to you? Well, it doesn't to
me...&lt;/p&gt;
&lt;p&gt;Onto design two! (Well actually my first design...) Lots of JavaScript
objects! The entire protocol is implemented as a set of JavaScript
objects and the handlers directly touch and modify the account's data
(of course there's methods for abstraction, etc.). This means that an
extension has absolutely FULL access to every about an account...this
also means an extension could seriously mess with and cause the protocol
to stop working or do really crazy things, etc. Unfortunately there
isn't really a way to avoid that. Hopefully people write good code.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="messages"&gt;
&lt;h2&gt;Messages&lt;/h2&gt;
&lt;p&gt;I'm going to go into an aside about messages right now, even though it
doesn't quite seem relevent yet. It will. IRC has a bunch of
sub-protocols embedded within the IRC protocol (see the link above about
unofficial extensions). We attempt to parse all the string messages and
make pretty JavaScript objects out of them. I've actually identified
five (yes, count that: five) different sub-&amp;quot;protocols&amp;quot; within IRC that
we deal:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;IRC itself (i.e. &lt;a class="reference external" href="http://tools.ietf.org/html/rfc1459"&gt;RFC 1459&lt;/a&gt; / &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2812"&gt;RFC 2812&lt;/a&gt; / various numeric
extensions)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.irchelp.org/irchelp/rfc/ctcpspec.html"&gt;CTCP (the Client-to-Client Protocol)&lt;/a&gt;,embedded in PRIVMSG commands
of IRC&lt;/li&gt;
&lt;li&gt;DCC (Direct Client-to-Client), a subprotocol of CTCP&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://tools.ietf.org/html/draft-brocklesby-irc-isupport-03"&gt;ISUPPORT&lt;/a&gt; (also known as Numeric 005), a method of negotiating
capabilities between a client and server&lt;/li&gt;
&lt;li&gt;And finally, handling of IRC Services (there's a lot of them and no
specification, but we treat them specially)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Briefly what happens when we receive a raw message over the wire, we
create an &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/file/b8d8b6e60aef/chat/protocols/irc/irc.js#l14"&gt;ircMessage object out of it using a variety of regular
expressions&lt;/a&gt;. This object has a variety of fields (see the link for
details), including the command, who sent the message and the
parameters.&lt;/p&gt;
&lt;p&gt;If the message is identified as a CTCP message, we then morph the
ircMessage into a &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/file/b8d8b6e60aef/chat/protocols/irc/ircCTCP.jsm#l44"&gt;CTCPMessage&lt;/a&gt;, which can be morphed into a
&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/file/b8d8b6e60aef/chat/protocols/irc/ircDCC.jsm#l20"&gt;DCCMessage&lt;/a&gt;. Additionally, a 005 reply can be parsed into a
&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/file/b8d8b6e60aef/chat/protocols/irc/ircISUPPORT.jsm#l22"&gt;isupportMessage&lt;/a&gt;. And last, but not least, a received PRIVMSG can also
be parsed into a &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/file/b8d8b6e60aef/chat/protocols/irc/ircServices.jsm#l19"&gt;ServiceMessage&lt;/a&gt;. Each of these extends the IRC
message without destroying information. (Yes, I'm realizing now that my
choice of whether to use capitals is all messed up...)&lt;/p&gt;
&lt;p&gt;Well, why do we care...? By preparsing the strings into objects (as
defined by any &amp;quot;specifications&amp;quot; that exist), we keep extensions from
having to parse messages over and over again from strings.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="handlers"&gt;
&lt;h2&gt;Handlers&lt;/h2&gt;
&lt;p&gt;A handler is simply what I call the object that contains the methods
to deal with an incoming message. Pretty much, you get to say &amp;quot;Only send
me ISUPPORT messages!&amp;quot; or &amp;quot;Only send me CTCP messages!&amp;quot; and voila, you
only get that type of message. Each message type has a field that is
used to choose the method to run (for the IRC messages, the &amp;quot;command&amp;quot;,
for CTCP the &amp;quot;CTCP command&amp;quot;, ISUPPORT the &amp;quot;parameter&amp;quot;, etc.) This sounds
a lot more complicated than it is, I think a brief &lt;a class="reference external" href="https://bitbucket.org/clokep/irc-extras/src/6f778f17172a/example/bootstrap.js"&gt;example&lt;/a&gt; is in
order:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;ircSimpleExample&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// The name here is really only used in error messages.&lt;/span&gt;
  &lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;IRC Simple Example&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="c1"&gt;// Slightly above the default priority so we run before the main IRC handler.&lt;/span&gt;
  &lt;span class="nx"&gt;priority&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ircHandlers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;DEFAULT_PRIORITY&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="c1"&gt;// Run this for all accounts (note that the &amp;#39;this&amp;#39; object in this method is&lt;/span&gt;
  &lt;span class="c1"&gt;// the JavaScript account object.&lt;/span&gt;
  &lt;span class="nx"&gt;isEnabled&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;

  &lt;span class="c1"&gt;// The commands we want to handle. For each of these, the account object is&lt;/span&gt;
  &lt;span class="c1"&gt;// bound to &amp;#39;this&amp;#39; and the single parameter is of the type that you&amp;#39;ve&lt;/span&gt;
  &lt;span class="c1"&gt;// registered your handle.&lt;/span&gt;
  &lt;span class="nx"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;001&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;aMessage&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="c1"&gt;// At the 001 response we&amp;#39;ve successfully connected to the server.&lt;/span&gt;
      &lt;span class="c1"&gt;// Send an IDENTIFY command to NickServ.&lt;/span&gt;
      &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;sendMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;PRIVMSG&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;NickServ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;IDENTIFY &amp;lt;your password&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;

      &lt;span class="c1"&gt;// Return false so the default handler still runs.&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Just like that we've designed a handler! Whenever the 001 method is
received from the server, this function will run and attempt to identify
with the NickServ (of course this could use a bit more security on it,
but it's to demonstrate the possibilities). (The sendMessage function
takes the command to send and an array of parameters to send.)&lt;/p&gt;
&lt;p&gt;As this is already a long post, I think I'll cut this off now and
continue this at another time, but I hope I'm beginning to convince you
that allowing directy access to the account and protocol implementation
is a more powerful (and even simpler in many ways, in my opinion)
alternative to &amp;quot;auto-performs&amp;quot;. The one major downside I see to this, is
that it requires a bit more understanding of the actual protocol level
implementation, I don't feel that knowing you need to use &amp;quot;PRIVMSG&amp;quot; as a
command instead of /msg is a huge issue, however.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category><category term="Mozilla"></category></entry><entry><title>Instantbird Contact List Hack #2</title><link href="https://clokep.github.io/instantbird-contact-list-hack-2.html" rel="alternate"></link><updated>2012-01-15T14:00:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2012-01-15:instantbird-contact-list-hack-2.html</id><summary type="html">&lt;p&gt;There was a &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=987"&gt;request&lt;/a&gt; on the Instantbird Bugzilla to always show
contacts in the contact list as the &amp;quot;big&amp;quot; contact (as shown when a
contact is selected).&amp;nbsp; Similarly to my &lt;a class="reference external" href="https://clokep.github.io/instantbird-contact-list-hack.html"&gt;last post&lt;/a&gt;, this can easily be
done with userChrome.css.&amp;nbsp; See the post if you don't know what
userChrome.css is.&lt;/p&gt;
&lt;p&gt;Again, we're simply going to always apply a specific CSS style to the
contacts, namely we'll be modifying the behavior of &lt;a class="reference external" href="http://lxr.instantbird.org/instantbird/source/instantbird/content/blist.css#38"&gt;blist.css&lt;/a&gt;.&amp;nbsp; I'm
sure you don't really care about that and just want the code, well I'll
oblige:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Expand all contacts to the big contact. */&lt;/span&gt;
&lt;span class="nx"&gt;contact&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;binding&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;chrome://instantbird/content/contact.xml#contact-big&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;important&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;box&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;orient&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;vertical&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;important&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;box&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;align&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;stretch&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;important&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And that's it!&amp;nbsp; Restart Instantbird and you should always have big
contacts.&amp;nbsp; I haven't seen any issues of using this (missing or wrong
behavior), but of course your mileage might vary.&amp;nbsp; Have fun!&lt;/p&gt;
</summary><category term="customizing"></category><category term="Instantbird"></category><category term="programming"></category></entry><entry><title>Instantbird Contact List Hack</title><link href="https://clokep.github.io/instantbird-contact-list-hack.html" rel="alternate"></link><updated>2011-11-01T00:20:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-11-01:instantbird-contact-list-hack.html</id><summary type="html">&lt;p&gt;A friend of mine asked me if there was a way to have selected contacts
in the contact list NOT expand to two lines (where the status goes onto
the second line) in Instantbird.&lt;/p&gt;
&lt;p&gt;There's actually no option to do this in Instantbird, but with a
little &lt;a class="reference external" href="http://www-archive.mozilla.org/unix/customizing.html"&gt;userChrome&lt;/a&gt; tweak, we can easily get this behavior (although
with a couple caveats).&amp;nbsp; You should be able to add a new folder &lt;a class="reference external" href="http://instantbird.com/faq.html#profilefolder"&gt;inside
your profile&lt;/a&gt; called chrome.&amp;nbsp; Inside of this make a new file called
userChrome.css and place the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nf"&gt;#buddylistbox&lt;/span&gt;&lt;span class="nd"&gt;:focus&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;contact&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;selected&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;binding&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="sx"&gt;url(&amp;quot;chrome://instantbird/content/contact.xml#contact&amp;quot;)&lt;/span&gt; &lt;span class="cp"&gt;!important&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;box&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;orient&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;horizontal&lt;/span&gt; &lt;span class="cp"&gt;!important&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save the file and restart...and that's it! Now your selected contacts
should be on one line, just like your unselected contacts.&lt;/p&gt;
&lt;p&gt;I did mention there was a caveat though! If you want to expand a
contact (to see all the protocols, etc. that you've merged together)
you'll need to use the arrow keys: right arrow expands a contact, left
arrow collapses a contact.&amp;nbsp; (You need to do this since the chevron icon
that lets you expand/collapse isn't shown on a non-selected contact.)&lt;/p&gt;
&lt;p&gt;(Some more technical details: we're forcing the standard contact
template to be used instead of the contact-big template, even when the
contact is expanded; i.e. we're overwriting the command given
&lt;a class="reference external" href="http://lxr.instantbird.org/instantbird/source/instantbird/content/blist.css#44"&gt;blist.css&lt;/a&gt;.)&lt;/p&gt;
</summary><category term="customizing"></category><category term="Instantbird"></category><category term="programming"></category></entry><entry><title>Adding a protocol to Instantbird (Part 2)</title><link href="https://clokep.github.io/adding-a-protocol-to-instantbird-part-2.html" rel="alternate"></link><updated>2011-09-03T14:31:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-09-03:adding-a-protocol-to-instantbird-part-2.html</id><summary type="html">&lt;p&gt;I had &lt;a class="reference external" href="https://clokep.github.io/adding-a-new-protocol-sipeoffice-communicator-to-instantbird-part-1.html"&gt;previously talked about adding a protocol to Instantbird&lt;/a&gt;,
that focused on adding SIPE (Microsoft Office Communicator support).
Since then I've been slowly working on defeating SIPE.&amp;nbsp; Fortunately I
found a few flags that help us compile it easily in Instantbird: we can
declare that we do &lt;em&gt;not&lt;/em&gt; have gmime and the standard libpurple MIME
functions will be used (they might not be as good, but it keeps from
adding &amp;gt;10 MB of source to Instantbird).&lt;/p&gt;
&lt;p&gt;Some modifications to the SIPE source were made to compile it in
Instantbird (note that most of the changes were probably more based on
using MSVC, than having to do with Instantbird).&amp;nbsp; The code is also
broken up into a few different sections the core, api, and purple are
ones we care about (they're working on making a general Office
Communicator protocol library, so the purple folder contains the
libpurple bindings that use the api, while the core is private).&lt;/p&gt;
&lt;div class="section" id="purple"&gt;
&lt;h2&gt;Purple&lt;/h2&gt;
&lt;p&gt;Changes to purple consisted mostly of ifdefs that remove some header
files not supported on Windows.&amp;nbsp; For example, I encountered a few of:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
#include &amp;lt;unistd.h&amp;gt;
&lt;/pre&gt;
&lt;p&gt;Luckily there was already a define &lt;tt class="docutils literal"&gt;HAVE_UNISTD_H&lt;/tt&gt;, so I just needed
to add:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
#ifdef HAVE_UNISTD_H
#include &amp;lt;unistd.h&amp;gt;
#endif
&lt;/pre&gt;
&lt;p&gt;Easy!&amp;nbsp; There were also a couple other issues, but those were rather
trivial.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="core"&gt;
&lt;h2&gt;Core&lt;/h2&gt;
&lt;p&gt;There isn't a specific issue in the core I'd like to highlight, it did
use a few glib functions which we didn't have (we removed the files, as
they were unused), they were all reimplemented in libpurple though, so
we were able to just define the function calls to the libpurple
variants.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="api"&gt;
&lt;h2&gt;API&lt;/h2&gt;
&lt;p&gt;This had similar issues the core (in particular, there was a function
which used &lt;tt class="docutils literal"&gt;g_usleep&lt;/tt&gt;, which is blocking and a definite no-no for a
protocol plug-in, I've removed that...hopefully it doesn't break
anything!)&amp;nbsp; In addition to that, we needed to use the libpurple l10n
system instead of glib's gi18n.h, this was easily copied from
libpurple's internal API though.&lt;/p&gt;
&lt;p&gt;So at this point...I have a copy of SIPE compiled!&amp;nbsp; Unfortunately
since I'm using Visual Studio Express I cannot compile on my computer
and deploy to other computers for testing (a Mozilla issue with how it
uses some of the header files, etc., I believe).&amp;nbsp; I'm looking into
trying to get this to work though, apparently using the exact same copy
of MSVC Redistributable might help.&amp;nbsp; Once this is tested, hopefully
it'll land in Instantbird for use!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="sametime-support"&gt;
&lt;h2&gt;Sametime support&lt;/h2&gt;
&lt;p&gt;Unrelated to SIPE, but recently I landed a patch in Instantbird to add
back Sametime support (Sametime is Lotus Notes' equivalent to Office
Communicator).&amp;nbsp; You can see the gory details in &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=102"&gt;bug 102&lt;/a&gt;, but in
general it's similar to what I've (not gone into great detail about)
here. Most of getting Sametime to work was rewriting some C code
that doesn't compile in MSVC.&amp;nbsp; There's also a &lt;a class="reference external" href="https://bugzilla.instantbird.org/attachment.cgi?id=797&amp;amp;action=diff"&gt;diff&lt;/a&gt; of all the
changes I made to the libpurple Sametime plugin and the external library
(called &lt;a class="reference external" href="http://meanwhile.sourceforge.net/"&gt;Meanwhile&lt;/a&gt;) to get it to work.&amp;nbsp; Once I get Monotone (a version
control system) set up I'll look into getting these changes pushed back
to libpurple to avoid diverging code bases.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="Instantbird"></category><category term="programming"></category><category term="SIPE"></category></entry><entry><title>Shared Lightning profile across Linux and Windows</title><link href="https://clokep.github.io/shared-lightning-profile-across-linux-and-windows.html" rel="alternate"></link><updated>2011-07-08T00:46:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-07-08:shared-lightning-profile-across-linux-and-windows.html</id><summary type="html">&lt;p&gt;In &lt;a class="reference external" href="irc://irc.mozilla.org/calendar"&gt;#calendar on Mozilla IRC&lt;/a&gt; the past few days a user has been
asking about using a shared profile on Thunderbird between Linux and
Windows (&amp;quot;shared&amp;quot; meaning a dual boot system of Linux/Windows, but not
at the same time, obviously).&amp;nbsp; Generally this isn't a big deal UNLESS
you have a binary extension, in which case you'd have to reinstall the
extension every time! That's awfully lame.&lt;/p&gt;
&lt;p&gt;BUT there should be a way to make a unified extension for all
operating systems.&amp;nbsp; In fact &lt;a class="reference external" href="https://wiki.mozilla.org/User:Ssitter/UnifiedLightning"&gt;ssitter had written an article to do
that&lt;/a&gt;.&amp;nbsp; It needs some updating to account for the Mozilla 2 XPCOM
changes, however.&lt;/p&gt;
&lt;p&gt;The steps are mostly the same, with some added.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Download whatever versions you want (&lt;a class="reference external" href="http://releases.mozilla.org/pub/mozilla.org/calendar/lightning/releases/1.0b4/"&gt;perhaps 1.0b4&lt;/a&gt;?).&lt;/li&gt;
&lt;li&gt;Unzip them all and choose which one will be your &amp;quot;unified&amp;quot; version.&lt;/li&gt;
&lt;li&gt;Find the &amp;lt;em:targetPlatform&amp;gt; section in the install.rdfs and include
all the necessary ones.&lt;/li&gt;
&lt;li&gt;Find the libcalbasecomps.* (where * is dll, dylib, so, etc. for
your platform) inside the components directories.&lt;/li&gt;
&lt;li&gt;Copy the libraries together into one directory.&lt;/li&gt;
&lt;li&gt;Copy the lines from each components.manifest together into one
manifest.&lt;/li&gt;
&lt;li&gt;For some systems you'll need to specify the ABI (and possibly change
the path), note that the ABI is just what was inside the
&amp;lt;em:targetPlatform&amp;gt;.&lt;/li&gt;
&lt;li&gt;Rezip this up into an XPI and you should be good to go!&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In my test I ended up with an XPI that was approximately 10% bigger
after combining Mac (x86 and x64), Linux (x86 and x64), Win32, Solaris
Sparc and Solaris x86.&amp;nbsp; Why is this not done by default?&amp;nbsp; Probably just
cause no one has done it...there is a &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=352543"&gt;bug about it&lt;/a&gt; though.&amp;nbsp; One issue
that might be encountered using this method is pre-processing of some
script files (as is discussed in that big) but hopefully it should
&amp;quot;mostly&amp;quot; work.&amp;nbsp; (Note that this is mostly untested.)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Edit:&lt;/strong&gt; I should also mention that you would need to do something
similar with the themes folders if they differ dramatically (it seems
there's &lt;a class="reference external" href="http://mxr.mozilla.org/comm-central/source/calendar/lightning/themes/"&gt;just two&lt;/a&gt;: winstripe and pinstripe: i.e. Windows &amp;amp; Mac; Linux
and Solaris most likely also use winstripe).&lt;/p&gt;
</summary><category term="Lightning"></category><category term="Mozilla"></category></entry><entry><title>Adding a new protocol (SIPE/Office Communicator) to Instantbird (part 1)</title><link href="https://clokep.github.io/adding-a-new-protocol-sipeoffice-communicator-to-instantbird-part-1.html" rel="alternate"></link><updated>2011-06-19T01:53:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-06-19:adding-a-new-protocol-sipeoffice-communicator-to-instantbird-part-1.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://en.wikipedia.org/wiki/Office_Communicator"&gt;Microsoft Office Communicator&lt;/a&gt; is an instant messaging client that
integrates into the &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Microsoft_Exchange_Server"&gt;Exchange Messaging Server&lt;/a&gt; (the protocol behind it
is an extended version of SIP/SIMPLE).&amp;nbsp; Anyway, there's a &lt;a class="reference external" href="http://developer.pidgin.im/wiki/WhatIsLibpurple"&gt;libpurple&lt;/a&gt;
(i.e. the backend of &lt;a class="reference external" href="http://instantbird.com/"&gt;Instantbird&lt;/a&gt; and &lt;a class="reference external" href="http://pidgin.im/"&gt;Pidgin&lt;/a&gt;) protocol plug-in for
OCS (Office Communicator Server) called &lt;a class="reference external" href="http://sipe.sourceforge.net/"&gt;SIPE&lt;/a&gt;.&amp;nbsp; (It's also striving
for a generic library to connect to OCS, but that's not quite there
yet.)&lt;/p&gt;
&lt;p&gt;I've been interested in getting this to compile in the Instantbird
framework for a while now, adding a new protocol to Instantbird.&amp;nbsp; First
of course I need the SIPE source, I chose to grab a release &lt;a class="reference external" href="http://sourceforge.net/projects/sipe/files/sipe/pidgin-sipe-1.11.2/"&gt;source
bundle&lt;/a&gt; instead of using the &lt;a class="reference external" href="http://sourceforge.net/apps/mediawiki/sipe/index.php?title=Windows_Build"&gt;git repository&lt;/a&gt;, just for ease moving
files around, etc.&amp;nbsp; There's a rather vague &lt;a class="reference external" href="http://sourceforge.net/apps/mediawiki/sipe/index.php?title=Windows_Build"&gt;Windows build&lt;/a&gt; page on the
wiki that I started with, says I need:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;libpurple &amp;gt;2.4.0 (we have 2.7.11)&lt;/li&gt;
&lt;li&gt;libglib &amp;gt;2.12.0 (we have 2.28.6)&lt;/li&gt;
&lt;li&gt;libxml2 (we have this)&lt;/li&gt;
&lt;li&gt;gmime &amp;gt;2.4 (not currently used)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So great, &lt;a class="reference external" href="https://wiki.instantbird.org/Instantbird:Third_party_code"&gt;we have most of the dependencies&lt;/a&gt;! We just need one more.
So I go grab, &lt;a class="reference external" href="http://developer.gnome.org/gmime/"&gt;gmime&lt;/a&gt;from the GNOME website (2.5.7, which is the
newest stable, currently), again as a source bundle and put the
necessary files in purple/libraries/gmime and edit the makefile so it
will (attempt) to compile.&amp;nbsp; But great -- it requires &lt;a class="reference external" href="http://www.gnu.org/software/libiconv/"&gt;libiconv&lt;/a&gt;, which
apparently is very difficult to compile, especially on Windows.&amp;nbsp; Luckily
for me there's a Windows version (not a port, but one that uses the
native Win32 APIs with the same interface): &lt;a class="reference external" href="http://code.google.com/p/win-iconv/"&gt;win-iconv&lt;/a&gt;.&amp;nbsp; This compiled
like a champ when added as purple/libraries/iconv.&lt;/p&gt;
&lt;p&gt;Unfortunately when I went back to compiling gmime, it attempts to
access parts of glib we're not using (gio, in particular) and thus is
not in our source code.&amp;nbsp; I can grab the &lt;a class="reference external" href="http://developer.gnome.org/glib/"&gt;glib&lt;/a&gt; source (2.28.6 to match,
of course) and add the gio subfolder, but first we should check if this
part of gmime is even used by SIPE! (My guess is that it is &lt;em&gt;not&lt;/em&gt;, but
that's where I'm at now.&amp;nbsp; I'll post back when I get further.&lt;/p&gt;
</summary><category term="Instantbird"></category><category term="programming"></category><category term="SIPE"></category></entry><entry><title>Compiling Instantbird</title><link href="https://clokep.github.io/compiling-instantbird.html" rel="alternate"></link><updated>2011-05-17T01:30:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-05-17:compiling-instantbird.html</id><summary type="html">&lt;p&gt;In the past I've tried to compile a few different programs that use
the Mozilla toolkit to various levels of success.&amp;nbsp; I've tried to compile
Thunderbird, Songbird and Instantbird at various points.&amp;nbsp; I got
Thunderbird to compile, but it only worked sporadically (although I
think that was Firefox moving so fast that Thunderbird couldn't keep
up), Songbird I gave up on rather quickly and Instantbird I've tried a
few times.&lt;/p&gt;
&lt;p&gt;Last summer I had Instantbird compiling on my old laptop (a Lenovo
T60), which is &amp;gt;5 years old at this point and has had the heatsink / fan
replaced twice -- a known issue with that model laptop.&amp;nbsp; Needless to
say, that laptop didn't like compiling something on Windows that took
approximately an hour with a large number of reads and writes to the
hard drive.&amp;nbsp; This mixed with it being an old dual core + a 5400 RPM
meant I'd be waiting a LONG time for my code to compile.&amp;nbsp; I got a
Thinkpad X201 this past summer, so I finally got around to setting up a
development environment on it and was able to get Instantbird to compile
fully today.&amp;nbsp; I've outlined the steps I've followed: kind of to mirror
the &lt;a class="reference external" href="https://developer.mozilla.org/En/Simple_Thunderbird_build"&gt;Simple Thunderbird Build&lt;/a&gt; page on MDC.&lt;/p&gt;
&lt;p&gt;I've done this using Microsoft Windows 7 Professional (64-bit) with
Service Pack 1. (4.00 GB of RAM, Intel Core i7 M620 2.67 GHz).
Throughout these steps, the defaults locations and options are used in
the installers.&lt;/p&gt;
&lt;div class="section" id="build-requirements"&gt;
&lt;h2&gt;Build Requirements:&lt;/h2&gt;
&lt;div class="section" id="visual-studio-express"&gt;
&lt;h3&gt;Visual Studio Express:&lt;/h3&gt;
&lt;p&gt;We need to install Visual Studio Express, specifically VC8 (2005) with
Service Pack 1.&amp;nbsp; (Mozilla compiles with VC9 and VC10 to various degrees,
but it seems libpurple only compiles with VC8, also this is what's on
the Instantbird buildbot, so I like having the same version.)&amp;nbsp; I
couldn't find this on Microsoft's website but I found it on &lt;a class="reference external" href="http://www.softpedia.com/get/Programming/Other-Programming-Files/Microsoft-Visual-C-Toolkit.shtml"&gt;Softpedia&lt;/a&gt;
(which is a legitimate site).&amp;nbsp; Anyway, download the installer and
install it (which will download the actual compiler from Microsoft),
ensure that you also install the IDE (which is checked by default).&lt;/p&gt;
&lt;p&gt;This will only install VC8, the initial release.&amp;nbsp; We also need to
install &lt;a class="reference external" href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=7b0b0339-613a-46e6-ab4d-080d4d4a8c4e"&gt;Service Pack 1&lt;/a&gt;.&amp;nbsp; I personally did this using Windows Update,
but one of the installers from there should also work.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="microsoft-windows-sdk"&gt;
&lt;h3&gt;Microsoft Windows SDK:&lt;/h3&gt;
&lt;p&gt;Specifically we need the &lt;a class="reference external" href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c17ba869-9671-4330-a63e-1fd44e0e2505&amp;amp;displaylang=en"&gt;Windows 7 SDK&lt;/a&gt; (for Jumplist, Aero, etc.
support).&amp;nbsp; Download and install the SDK, this one took a while for me to
install.&amp;nbsp; I ate dinner while it was installing (pasta, if you're curious
-- I already had sauce made).&lt;/p&gt;
&lt;p&gt;There's a linker error when using VC8 and the Windows 7 SDK, so we'll
need to install a &lt;a class="reference external" href="http://support.microsoft.com/kb/949009/"&gt;hotfix&lt;/a&gt;for that (I tried without it and I ran into
the issue).&amp;nbsp; I had to download the &amp;quot;VS80sp1-KB949009-IA64-INTL.exe&amp;quot;
version (there's also an X86 and an X64 version).&amp;nbsp; Choose the one that
works.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="microsoft-macro-assembler"&gt;
&lt;h3&gt;Microsoft Macro Assembler:&lt;/h3&gt;
&lt;p&gt;In order to properly assemble the code we need to &lt;a class="reference external" href="http://www.microsoft.com/downloads/en/details.aspx?familyid=7A1C9DA0-0510-44A2-B042-7EF370530C64&amp;amp;displaylang=en"&gt;install MASM&lt;/a&gt;
(which I think will eventually be included in MozillaBuild, but it isn't
currently).&amp;nbsp; Again, just install it with the defaults.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mozillabuild"&gt;
&lt;h3&gt;MozillaBuild:&lt;/h3&gt;
&lt;p&gt;Almost there, I promise.&amp;nbsp; In order to get a *nix type shell to run
make, etc. in we'll use a package from Mozilla that includes MSYS, make,
Mercurial, etc.&amp;nbsp; Download and &lt;a class="reference external" href="http://ftp.mozilla.org/pub/mozilla.org/mozilla/libraries/win32/MozillaBuildSetup-Latest.exe"&gt;install MozillaBuild&lt;/a&gt;, the latest should
work fine.&lt;/p&gt;
&lt;p&gt;Now, an unknown step: you might require the &lt;a class="reference external" href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=a5c84275-3b97-4ab7-a40d-3802b2af5fc2&amp;amp;displaylang=en"&gt;Microsoft Visual C++ 2008
SP1 Redistributable Package&lt;/a&gt;.&amp;nbsp; I don't know if you need this or not
since I &lt;em&gt;already&lt;/em&gt; had it, most likely from a previous program I've
installed.&lt;/p&gt;
&lt;p&gt;We should be ready to build now pretty much.&amp;nbsp; For some more
information for this stuff you can check out the Mozilla Developer
Network pages I used to get this information: &lt;a class="reference external" href="https://developer.mozilla.org/En/Developer_Guide/Build_Instructions"&gt;Build Instructions&lt;/a&gt;,
&lt;a class="reference external" href="https://developer.mozilla.org/En/Developer_Guide/Build_Instructions/Windows_Prerequisites"&gt;Windows Build Prerequisites&lt;/a&gt; and &lt;a class="reference external" href="https://developer.mozilla.org/cn/VC8_Build_Instructions"&gt;MSVC8 Build Instructions&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="checkout-the-code"&gt;
&lt;h2&gt;Checkout the Code:&lt;/h2&gt;
&lt;p&gt;We need to checkout the code.&amp;nbsp; I originally checked out the code with
TortoiseHg (which is what I normally use), but the version of Mercurial
included is significantly greater than the one included in MozillaBuild
and this caused me issues later on.&amp;nbsp; Thus, we'll check out the code on
the command line.&amp;nbsp; Start by launching the bash shell, which is at
C:\mozilla-build\start-msvc8.bat (don't use the x64 version).&amp;nbsp; There's
a version here which corresponds to each version of VS.&lt;/p&gt;
&lt;p&gt;Once this finishes loading you'll be in the home directory (which is
in the root of your user's documents and settings folder, i.e. for me:
C:\Users\clokep).&amp;nbsp; You'll want to do the following:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
hg clone https://hg.instantbird.org/instantbird
&lt;/pre&gt;
&lt;p&gt;This might take a few minutes depending on how good your internet
connection is.&amp;nbsp; (The Instantbird source isn't THAT big though, it
shouldn't take too long.)&lt;/p&gt;
&lt;p&gt;Then we'll need to change into the instantbird directory that was just
created and download the Mozilla source code:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
cd instantbird
python client.py checkout
&lt;/pre&gt;
&lt;p&gt;Now this step?&amp;nbsp; This one is gonna take a while.&amp;nbsp; It took me like a
couple of hours.&amp;nbsp; It pulls the Mozilla source code, which is large and
has many changesets.&amp;nbsp; Just let it go, it'll give you progress
occasionally (changes, manifests, files, etc.)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Compiling Instantbird:&lt;/h2&gt;
&lt;p&gt;We need to set up the options we want to build with.&amp;nbsp; These are
read from a .mozconfig (don't miss the &amp;quot;.&amp;quot; in the front!).&amp;nbsp; The contents
of the .mozconfig that worked for me are:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ac_add_options --enable-application=instantbird
mk_add_options MOZ_OBJDIR=&amp;#64;TOPSRCDIR&amp;#64;/objdir-ib-release
ac_add_options --disable-accessibility
&lt;/pre&gt;
&lt;p&gt;The first option says to build Instantbird, the second gives an output
directory and the third &lt;a class="reference external" href="https://developer.mozilla.org/en/atlbase.h"&gt;disables accessibility&lt;/a&gt; (not really sure why
we need to do this, but we'll get that error at that link otherwise).&lt;/p&gt;
&lt;p&gt;Finally (back in the bash shell) type:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
make -f client.mk build
&lt;/pre&gt;
&lt;p&gt;Now sit back and relax.&amp;nbsp; My build took about an hour to finish, maybe
a bit less -- I wasn't fully paying attention.&amp;nbsp; Once it's done you
should see something like:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Processed 1 file, writing output:

Output:
&amp;quot;c:\\Users\\clokep\\instantbird\\objdir-ib-release\\instantbird\\installer\\windows\\instgen\\helper.exe&amp;quot;
Install: 2 pages (128 bytes), 1 section (16416 bytes), 2579
instructions (72212 bytes), 369 strings (10198 bytes), 1 language table (230 bytes).
Uninstall: 5 pages (320 bytes),
1 section (16416 bytes), 2063 instructions (57764 bytes), 388 strings
(10828 bytes), 1 language table (314 bytes).
Datablock optimizer saved 123940 bytes (~17.6%).
Using zlib compression.
EXE header size:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 63488 / 39424 bytes
Install code:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 99564 / 99560 bytes
Install data:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 118002 / 241950 bytes
Uninstall code+data:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 398654 / 398646 bytes
CRC (0x062AF3F5):&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4 / 4 bytes
Total size:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 679712 / 779584 bytes (87.1%)
c:/Users/clokep/instantbird/objdir-ib-release/mozilla/config/nsinstall.exe -D ../../../mozilla/dist/bin/uninstall
cp instgen/helper.exe ../../../mozilla/dist/bin/uninstall
make[5]: Leaving directory `/c/Users/clokep/instantbird/objdir-ib-release/instantbird/installer/windows'
make[4]: Leaving directory `/c/Users/clokep/instantbird/objdir-ib-release/instantbird'
make[3]: Leaving directory `/c/Users/clokep/instantbird/objdir-ib-release'
make[2]: Leaving directory `/c/Users/clokep/instantbird/objdir-ib-release'
make[1]: Leaving directory `/c/Users/clokep/instantbird/objdir-ib-release'
&lt;/pre&gt;
&lt;p&gt;Now, to test that the build actually worked we can browse to the
compiled executable and run it:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
cd objdir-ib-release/mozilla/dist/bin/instantbird.exe -P dev -no-remote
&lt;/pre&gt;
&lt;p&gt;The -P option specifies a profile name (dev), the second option
(-no-remote) allows you to run a second Instantbird instance (since I
assume you use Instantbird to IM...you probably want to be able to run a
second one, if you don't use it...shame on you. Try not to close the
wrong Instantbird when you're working on stuff).&lt;/p&gt;
&lt;p&gt;Hopefully this will help someone else get started on hacking
Instantbird.&amp;nbsp; There's other good ways you can hack too if your computer
can't handle compiling, including unpacking omni.jar.&lt;/p&gt;
&lt;p&gt;One last tidbit is to possibly add the option to your .mozconfig:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
--enable-chrome-format=flat
&lt;/pre&gt;
&lt;p&gt;This will not package anything in JARs (which pretty much just get in
the way while developing).&amp;nbsp; See&amp;nbsp;&lt;a class="reference external" href="https://developer.mozilla.org/en/JAR_Packaging"&gt;here&lt;/a&gt; for more info.&lt;/p&gt;
&lt;p&gt;Edit: Fixed the path to the executable thanks to Florian. And fixed a
spelling error in the title.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="Instantbird"></category><category term="Mozilla"></category><category term="programming"></category></entry><entry><title>Why rewrite the IRC protocol plugin? (Part 2)</title><link href="https://clokep.github.io/why-rewrite-the-irc-protocol-plugin-part-2.html" rel="alternate"></link><updated>2011-04-30T17:01:00-04:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-04-30:why-rewrite-the-irc-protocol-plugin-part-2.html</id><summary type="html">&lt;p&gt;I &lt;a class="reference external" href="https://clokep.github.io/why-rewrite-irc-into-javascript-vs-libpurples-vs-chatzillas.html"&gt;previously wrote about&lt;/a&gt; why I'm rewriting the libpurple IRC
implementation into a JavaScript implementation for Instantbird.&amp;nbsp; This
is kind of a follow up, but more focused on what I hope to accomplish
feature wise for IRC in Instantbird.&amp;nbsp; A good overview to look at is the
&lt;a class="reference external" href="https://bugzilla.instantbird.org/showdependencygraph.cgi?id=507&amp;amp;display=web&amp;amp;rankdir=LR"&gt;dependencies of bug 507&lt;/a&gt; (implement IRC in JavaScript) -- you'll want
to look to the left of bug 507, these are the bugs that depend on 507
(as opposed to blocking 507).&lt;/p&gt;
&lt;p&gt;My overall hope is to make Instantbird the easiest and simplest IRC
client to use.&amp;nbsp; I've found that most IRC clients tend to depend a great
deal on commands and essentially being a very thin GUI layer on top of
the protocol.&amp;nbsp; I don't really see the reason for this, we should attempt
to hide the protocol as much as possible from the users.&amp;nbsp; This means
fitting the IRC command responses into the GUI wherever possible and
possibly &amp;quot;losing&amp;quot; some features compared to other IRC clients, although
I think that's a matter of perspective.&amp;nbsp; (For example, there's often an
IRC command to list all the channels available, I &lt;em&gt;do not&lt;/em&gt; think this
should be implemented as a text command, but it should be available via
the join chat GUI).&lt;/p&gt;
&lt;p&gt;Now some more specific plans:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Support for IRC services would be pretty awesome, I'm not sure
whether this would be part of the main protocol or as an extension,
but it should be able to handle NickServ mostly autonomously
(possibly even automatically registering the nick, etc.).&amp;nbsp; MemoServ
could be implemented as a message service once there is UI for that
in Instantbird.&amp;nbsp; I'm not sure how ChanServ could be handled in the
UI, but I'll think more about this.&amp;nbsp; See &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=720"&gt;bug 720&lt;/a&gt; for more info.
(And yes, there are multiple versions of IRC services, but we can
attempt to support a subset and otherwise just leave it up to the
user.&amp;nbsp; Ideally servers would have supported this stuff...but that's
not how IRC works.)&lt;/li&gt;
&lt;li&gt;The UI should be more responsive to the modes of the user and to the
channel.&amp;nbsp; For example, if the user does not have permission to edit
the topic, it should not be editable in the UI (&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=318"&gt;bug 318&lt;/a&gt;).&amp;nbsp; Also,
if a user is a (half-)operator, there should be UI to have cause
other users to be given (h)op (&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=597"&gt;bug 597&lt;/a&gt;).&amp;nbsp; In terms of channel
modes, there could be UI to show the channel is invite only or that
it's a hidden channel.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There's some not as user visible improvements I'd like to make:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Supporting more authentication methods in IRC (&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=719"&gt;bug 719&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There's also a few &amp;quot;bugs&amp;quot; in the libpurple implementation that this
will fix:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;The /msg command doesn't show outgoing messages (&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=188"&gt;bug 188&lt;/a&gt;).&amp;nbsp; I
believe this is actually already fixed.&lt;/li&gt;
&lt;li&gt;IRC channels should automatically rejoin on reconnect (&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=385"&gt;bug 385&lt;/a&gt;).&lt;/li&gt;
&lt;li&gt;Chats with other users should show whether they are available or not
(&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=613"&gt;bug 613&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These are just some ideas and it's a long ways off for feature parity
with libpurple even.&amp;nbsp; (Although since Instantbird doesn't support all
the features of Pidgin, feature-parity in this case doesn't include
things like DCC transfer, etc. until Instantbird itself supports those.)&lt;/p&gt;
&lt;p&gt;Right now, the code is mostly usable (and I'm finally catching any
exceptions that are thrown so the code shouldn't crash anymore), and
works fine.&amp;nbsp; The one issue I'm having is sometimes I'm unable to
reconnect when the connection is lost, but I think I've finally fixed
that issue and reconnection should happen automatically!&lt;/p&gt;
&lt;p&gt;One last quick note, if you happen to have the &lt;a class="reference external" href="https://hg.instantbird.org/experiments"&gt;repository&lt;/a&gt; checked
out, you'll want to update on the default branch from now on as I've
merged the separate branches together under subfolders.&lt;/p&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category></entry><entry><title>The so-called IRC "specifications"</title><link href="https://clokep.github.io/the-so-called-irc-specifications.html" rel="alternate"></link><updated>2011-03-09T01:20:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-03-09:the-so-called-irc-specifications.html</id><summary type="html">&lt;p&gt;In a &lt;a class="reference external" href="https://clokep.github.io/why-rewrite-irc-into-javascript-vs-libpurples-vs-chatzillas.html"&gt;previous post&lt;/a&gt; I had briefly gone over the &amp;quot;history of IRC&amp;quot; as
I know it.&amp;nbsp; I'm going to expand on this a bit as I've come to understand
it a bit more while reading through documentation.&amp;nbsp; (Hopefully it won't
sound too much like a rant, as it is all driving me crazy!)&lt;/p&gt;
&lt;div class="section" id="irc-specifications"&gt;
&lt;h2&gt;IRC Specifications&lt;/h2&gt;
&lt;p&gt;So there's the original specification (&lt;a class="reference external" href="http://tools.ietf.org/html/rfc1459"&gt;RFC 1459&lt;/a&gt;) in May 1993; this
was expanded and replaced by four different specifications (&lt;a class="reference external" href="http://tools.ietf.org/html/rfc2810"&gt;RFC 2810&lt;/a&gt;,
&lt;a class="reference external" href="http://tools.ietf.org/html/rfc2811"&gt;2811&lt;/a&gt;, &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2812"&gt;2812&lt;/a&gt;, &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2813"&gt;2813&lt;/a&gt;) in April 2000.&amp;nbsp; Seems pretty straightforward,
right?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="dcc-ctcp"&gt;
&lt;h2&gt;DCC/CTCP&lt;/h2&gt;
&lt;p&gt;Well, kind of...there's also the DCC/CTCP specifications, which is a
separate protocol embedded/hidden within the IRC protocol (e.g. they're
sent as IRC messages and parsed specially by clients, the server sees
them as normal messages).&amp;nbsp; DCC/CTCP is used to send files as well as
other particular messages (ACTION commands for roleplaying, SED for
encrypting conversations, VERSION to get client information, etc.).
Anyway, this get's a bit more complicated -- it starts with the &lt;a class="reference external" href="http://www.irchelp.org/irchelp/rfc/dccspec.html"&gt;DCC
specification&lt;/a&gt;.&amp;nbsp; This was replaced/updated by the &lt;a class="reference external" href="http://www.irchelp.org/irchelp/rfc/ctcpspec.html"&gt;CTCP specification&lt;/a&gt;
(which fully includes the DCC specification) in 1994.&amp;nbsp; An &lt;a class="reference external" href="http://www.invlogic.com/irc/ctcp.html"&gt;&amp;quot;updated&amp;quot;
CTCP specification&lt;/a&gt; was released in February 1997.&amp;nbsp; There's also a
&lt;a class="reference external" href="http://www.invlogic.com/irc/ctcp2_intro.html"&gt;CTCP/2 specification&lt;/a&gt; from October 1998, which was meant to
reformulate a lot of the previous three versions.&amp;nbsp; And &lt;em&gt;finally&lt;/em&gt;,
there's the DCC2 specification (two parts: &lt;a class="reference external" href="http://tools.ietf.org/html/draft-smith-irc-dcc2-negotiation-00"&gt;connection negotiation&lt;/a&gt; and
&lt;a class="reference external" href="http://www.dcc2.org/files/dcc2/draft-smith-irc-dcc2-files-00.txt"&gt;file transfers&lt;/a&gt;) from April 2004.&lt;/p&gt;
&lt;p&gt;But wait!&amp;nbsp; I lied...that's not really the end of DCC/CTCP, there's
also a bunch of extensions to it: &lt;a class="reference external" href="http://www.visualirc.net/tech-tdcc.php"&gt;Turbo DCC&lt;/a&gt;, &lt;a class="reference external" href="http://xa.bi/files/irc/xdcc.3.3.0b.irc"&gt;XDCC (eXtended DCC)&lt;/a&gt;
in 1993, &lt;a class="reference external" href="http://www.visualirc.net/tech-wboard.php"&gt;DCC Whiteboard&lt;/a&gt;, and a few other variations of this: RDCC
(Reverse DCC), SDD (Secure DCC), DCC Voice, etc.&amp;nbsp; Wikipedia has a &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Direct_Client-to-Client"&gt;good
summary&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Something else to note about the whole DCC/CTCP mess...parts of it
just &lt;em&gt;don't&lt;/em&gt; have any documentation.&amp;nbsp; There's &lt;em&gt;none&lt;/em&gt;at all for SED (at
least that I've found, I'd love to be proved wrong) and very little
(really just a mention) for DCC Voice.&lt;/p&gt;
&lt;p&gt;So, we're about halfway through now.&amp;nbsp; There's a bunch of extensions to
the IRC protocol specifications that add new commands to the actual
protocol.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="authentication"&gt;
&lt;h2&gt;Authentication&lt;/h2&gt;
&lt;p&gt;Originally IRC had no authentication ability except the PASS command,
which very few servers seem to use, a variety of mechanisms have
replaced this, including &lt;a class="reference external" href="http://hg.atheme.org/atheme/atheme/raw-file/tip/doc/SASL"&gt;SASL authentication&lt;/a&gt; (both PLAIN and BLOWFISH
methods, although BLOWFISH isn't documented); and SASL itself is covered
by at least &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2222"&gt;four&lt;/a&gt; &lt;a class="reference external" href="http://tools.ietf.org/html/rfc4422"&gt;RFCs&lt;/a&gt; &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2595"&gt;in this&lt;/a&gt; &lt;a class="reference external" href="http://tools.ietf.org/html/rfc4616"&gt;situation&lt;/a&gt;.&amp;nbsp; There also seems
to be a method called &amp;quot;Auth&amp;quot; which I haven't been able to pin down, as
well as Ident (which is a more general protocol authentication method I
haven't looked into yet).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="extension-support"&gt;
&lt;h2&gt;Extension Support&lt;/h2&gt;
&lt;p&gt;This includes a few that generally add a way by which servers are able
to tell their clients exactly what a server supports.&amp;nbsp; The first of
these was RPL_ISUPPORT, which was defined as a &lt;a class="reference external" href="http://tools.ietf.org/html/draft-brocklesby-irc-isupport-03"&gt;draft specification&lt;/a&gt;
in January 2004, and &lt;a class="reference external" href="http://tools.ietf.org/html/draft-hardy-irc-isupport-00"&gt;updated&lt;/a&gt; in January of 2005.&lt;/p&gt;
&lt;p&gt;A similar concept was defined as &lt;a class="reference external" href="http://tools.ietf.org/html/draft-mitchell-irc-capabilities-01"&gt;IRC Capabilities&lt;/a&gt; in March 2005.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="protocol-extensions"&gt;
&lt;h2&gt;Protocol Extensions&lt;/h2&gt;
&lt;p&gt;IRCX, a Microsoft extension to IRC used (at one point) for some of
it's instant messaging products &lt;a class="reference external" href="http://tools.ietf.org/html/draft-pfenning-irc-extensions-04"&gt;exists as a draft&lt;/a&gt; from June 1998.&lt;/p&gt;
&lt;p&gt;There's also:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;The &lt;a class="reference external" href="http://hg.atheme.org/charybdis/charybdis/raw-file/tip/doc/monitor.txt"&gt;MONITOR&lt;/a&gt; command.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://hg.atheme.org/charybdis/charybdis/raw-file/tip/doc/modeg.txt"&gt;User mode +g&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://hg.atheme.org/charybdis/charybdis/raw-file/tip/doc/services.txt"&gt;Services compatibility modes&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://hg.atheme.org/charybdis/charybdis/raw-file/tip/doc/account-notify.txt"&gt;Account-notify client capability&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://hg.atheme.org/charybdis/charybdis/raw-file/tip/doc/tgchange.txt"&gt;Target change for messages&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="services"&gt;
&lt;h2&gt;Services&lt;/h2&gt;
&lt;p&gt;To fill in some of the missing features of IRC, services were created
(Wikipedia has a good &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Internet_Relay_Chat_services"&gt;summary&lt;/a&gt; again).&amp;nbsp; This commonly includes
ChanServ, NickServ, OperServ, and MemoServ.&amp;nbsp; Not too hard, but different
server packages include different services (or even the same services
that behave differently), one of more common ones is &lt;a class="reference external" href="http://www.anope.org/docgen/1.8/en_us/"&gt;Anope&lt;/a&gt;, however
(plus they have awesome documentation, so they get a link).&lt;/p&gt;
&lt;p&gt;There was an attempt to standardize how to interact with services
called IRC+, which included three specifications: &lt;a class="reference external" href="http://www.irc-plus.org/specs/confctrl-draft.html"&gt;conference control
protocol&lt;/a&gt;, &lt;a class="reference external" href="http://www.irc-plus.org/specs/identity-draft.html"&gt;identity protocol&lt;/a&gt; and &lt;a class="reference external" href="http://www.irc-plus.org/specs/subscriptions-draft.html"&gt;subscriptions protocol&lt;/a&gt;.&amp;nbsp; I don't
believe this are supported widely (if at all).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="irc-url-scheme"&gt;
&lt;h2&gt;IRC URL Scheme&lt;/h2&gt;
&lt;p&gt;Finally this brings us to the IRC URL scheme of which there are a few
versions.&amp;nbsp; A draft from August 1996 defines the original &lt;a class="reference external" href="http://tools.ietf.org/html/draft-mirashi-url-irc-01"&gt;irc: URL
scheme&lt;/a&gt;.&amp;nbsp; This was updated/replaced by &lt;a class="reference external" href="http://tools.ietf.org/html/draft-butcher-irc-url-04"&gt;another draft&lt;/a&gt; which defines
irc: and ircs: URL schemes.&lt;/p&gt;
&lt;p&gt;As of right now that's all that I've found...an awful lot.&amp;nbsp; Plus it's
not all compatible with each other (and sometimes out right contradicts
each other).&amp;nbsp; Often newer specifications say not to support older
specifications, but who knows what servers/clients you'll end up talking
to!&amp;nbsp; It's difficult to know what's used in practice, especially since
there's an awful lot of &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Comparison_of_IRC_daemons"&gt;IRC servers&lt;/a&gt; out there.&amp;nbsp; Anyway, if someone
does know of another specification, etc. that I missed please let me
know!&lt;/p&gt;
&lt;/div&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category><category term="programming"></category><category term="specifications"></category></entry><entry><title>Status Update - February 17, 2011</title><link href="https://clokep.github.io/status-update-february-17-2011.html" rel="alternate"></link><updated>2011-02-17T23:21:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-02-17:status-update-february-17-2011.html</id><summary type="html">&lt;p&gt;Another month has gone by so it's time for another status update.
Unfortunately not as much got done this month as I was hoping, but
here's a quick update of what I've worked on:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=690"&gt;Bug 690&lt;/a&gt; - jsProtoHelper could help registering commands&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=661"&gt;Bug 661&lt;/a&gt; - JavaScript accounts do not automatically set
containsNick field on messages&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=686"&gt;Bug 686&lt;/a&gt; - Implement default chat name for
getChatRoomDefaultFieldValues for js-proto&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Florian also implemented a few things that are really helpful for
JavaScript protocols:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=649"&gt;Bug 649&lt;/a&gt; - purple proxies should not be in the way of JavaScript
protocols&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=118"&gt;Bug 118&lt;/a&gt; - Extensions should be able to register commands.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In addition, Twitter support was added to nightly builds as a
JavaScript protocol (&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=598"&gt;bug 598&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Hopefully next I'll implement most of the commands for IRC (within the
next week) at which point I'll release a sample extension (which will
overwrite the libpurple IRC implementation), allowing people to test
without needing to make a new account, etc.&lt;/p&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category><category term="programming"></category></entry><entry><title>Status Update - January 18, 2011</title><link href="https://clokep.github.io/status-update-january-18-2011.html" rel="alternate"></link><updated>2011-01-19T03:17:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2011-01-19:status-update-january-18-2011.html</id><summary type="html">&lt;p&gt;I haven't had an update in a few weeks (since early December)
actually, so I thought I would post a bit about what I've worked on.
I've fixed a bunch of bugs in the backend of Instantbird that allow work
on JavaScript IRC protocol to continue:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=519"&gt;Bug 519&lt;/a&gt; - Extend jsProtoHelper to implement purpleIConvChat
(&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/0166084ce2ae"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=495"&gt;Bug 495&lt;/a&gt; - purpleIAccount cannot access preferences via JavaScript
protocol (&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/a188a5cc3ff1"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=648"&gt;Bug 648&lt;/a&gt; -Provide a default JS implementation of
purpleIChatRoomField
(&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/61fc80a569d3"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;[Reviewed] &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=647"&gt;Bug 647&lt;/a&gt; - Username split for JavaScript protocols
(&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/a6c8fbf77e10"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;[Reviewed] &amp;lt;no bug&amp;gt; -Share the nsIClassInfo implementation between
all the objects implemented in jsProtoHelper
(&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/035f7d8d7f78"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also a few other random bugs I've worked on:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=625"&gt;Bug 625&lt;/a&gt; - Findbar broken on Windows in Conversation window
(&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/2e8af77af2f2"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=629"&gt;Bug 629&lt;/a&gt; - Remove workaround for bug 503048
(&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/ba4b9401791b"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=473"&gt;Bug 473&lt;/a&gt; - JS Logger line breaks don't play well on Windows
&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/6a600b8a32c9"&gt;(check-in&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=593"&gt;Bug 593&lt;/a&gt; - JavaScript component does not have a method named:
&amp;quot;onBeforeLinkTraversal&amp;quot;
(&lt;a class="reference external" href="http://hg.instantbird.org/instantbird/rev/1b75f9fa4859"&gt;check-in&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Although none of these are really things that weren't working a few
weeks ago, there are now real APIs for these for JavaScript protocols,
allowing other protocols to use them and to &lt;em&gt;FULLY&lt;/em&gt; implement them
instead of hard coding values.&amp;nbsp; In addition, a lot of the purplexpcom
layer is now hidden from JavaScript protocols.&lt;/p&gt;
&lt;p&gt;There's a few things left to do for the JavaScript protocol layer:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=118"&gt;Bug 118&lt;/a&gt; - Extensions should be able to register commands.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=650"&gt;Bug 650&lt;/a&gt; - JavaScript accounts must be notified of status changes
(a sketchy patch that exists that will work, but a better patch to
core should be done)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=623"&gt;Bug 623&lt;/a&gt; - Auto-Join option field is hard coded for certain
protocols (not &lt;em&gt;really&lt;/em&gt; necessary, since it's still IRC, but it
should be fixed)&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=649"&gt;Bug 649&lt;/a&gt; - Proxy should be available to JavaScript protocols
(hopefully being handled by Florian)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A good summary of this is &lt;a class="reference external" href="https://bugzilla.instantbird.org/showdependencygraph.cgi?id=507&amp;amp;display=web&amp;amp;rankdir=LR"&gt;the dependency graph of bug 507&lt;/a&gt;
(Implement IRC in JavaScript).&amp;nbsp; Note that the IRC JavaScript work blocks
&lt;em&gt;a&amp;nbsp; lot&lt;/em&gt; of UI work done for IRC.&amp;nbsp; In particular Mook has been working
on implementing notifications (i.e. Invites, and perhaps a few other
commands), see &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=628"&gt;Bug 628&lt;/a&gt;.&amp;nbsp; For other bugs, see the link above -- and if
there's a strange UI feature that you think should be added, please file
a bug and let us know about it!&lt;/p&gt;
&lt;p&gt;I've also worked a bit on sending outgoing text with rich formatting
(bold, italics, underline, text size, etc.), this work is being tracked
in &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=634"&gt;Bug 634&lt;/a&gt;. There's a proof on concept, but a lot of work needs to be
done for it, but it's sort of working right now.&lt;/p&gt;
&lt;p&gt;As I alluded to in my last blog post, the JavaScript protocols would
be used to implement Twitter. Work for this is occurring in &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=598"&gt;Bug 598&lt;/a&gt;,
where Florian has implemented (very) basic Twitter support.&lt;/p&gt;
&lt;p&gt;My plans for the next bit:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;I'm hoping to finish up some of the work blocking JavaScript
protocols so IRC can be put into a state that needs alpha/beta
testers (if you're interested in testing/hacking please drop me a
line here, on IRC or via email).&lt;/li&gt;
&lt;li&gt;Move into my new apartment&lt;/li&gt;
&lt;li&gt;Start my new job&lt;/li&gt;
&lt;li&gt;Work on richtext messages a bit more&lt;/li&gt;
&lt;/ul&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category><category term="Mozilla"></category><category term="programming"></category></entry><entry><title>Blogger RSS Feeds for a Label</title><link href="https://clokep.github.io/blogger-rss-feeds-for-a-label.html" rel="alternate"></link><updated>2010-12-08T19:25:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2010-12-08:blogger-rss-feeds-for-a-label.html</id><summary type="html">&lt;p&gt;Blogger has crappy support for RSS apparently.&amp;nbsp; I figured if I clicked
on a label, then found the RSS embedded in the page...it would give me
the RSS feed for that label, right?&lt;/p&gt;
&lt;p&gt;Wrong.&lt;/p&gt;
&lt;p&gt;Of course there's an&amp;nbsp;&lt;a class="reference external" href="http://www.google.com/support/blogger/bin/answer.py?hl=en&amp;amp;answer=97933"&gt;FAQ&lt;/a&gt; page about this, but the syntax it gives
is broken.&amp;nbsp; For a specific label (I'm using the label &amp;quot;Instantbird&amp;quot;):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;RSS:
&lt;a class="reference external" href="http://clokep.blogspot.com/feeds/posts/default/-/Instantbird?alt=rss"&gt;http://clokep.blogspot.com/feeds/posts/default/-/Instantbird?alt=rss&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Atom: &lt;a class="reference external" href="http://clokep.blogspot.com/feeds/posts/default/-/Instantbird"&gt;http://clokep.blogspot.com/feeds/posts/default/-/Instantbird&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Who knows what versions of RSS/Atom these are.&amp;nbsp; But the feeds do exist.&lt;/p&gt;
</summary><category term="bugs"></category><category term="Google"></category><category term="RSS"></category></entry><entry><title>Why Rewrite IRC into JavaScript? (vs. libpurple's vs. ChatZilla's)</title><link href="https://clokep.github.io/why-rewrite-irc-into-javascript-vs-libpurples-vs-chatzillas.html" rel="alternate"></link><updated>2010-12-08T18:29:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2010-12-08:why-rewrite-irc-into-javascript-vs-libpurples-vs-chatzillas.html</id><summary type="html">&lt;p&gt;I had a request on IRC (from Mic) to write an in-depth blog post
about &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=507"&gt;IRC in JavaScript&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&amp;quot;Maybe we could ask clokep if he'd like to write something about
js-irc? Why it is done, what the advantages are once it's done, how
he is working on it (going through the specs), putting the
jsProtocol code to test and adding missing pieces?&amp;quot; -- &lt;a class="reference external" href="http://log.bezut.info/instantbird/101208/#m54"&gt;Mic&lt;/a&gt;&lt;/blockquote&gt;
&lt;div class="section" id="wait-a-second-what-is-irc"&gt;
&lt;h2&gt;Wait a second, what is IRC?&lt;/h2&gt;
&lt;p&gt;I guess this is a good first question, I'll steal from &lt;a class="reference external" href="http://en.wikipedia.org/wiki/IRC"&gt;Wikipedia&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
Internet Relay Chat (IRC) is a form of real-time [...] chat [...] It
is mainly designed for group communication [...] but also allows
[...for...] private message as well as chat and data transfers.&lt;/blockquote&gt;
&lt;p&gt;Awesome, what's that really mean?&amp;nbsp; It's an instant messaging protocol
with an actual specification (i.e. it's not owned by some large, unnamed
company), with open-source libraries for clients and servers.&amp;nbsp; It's
usually used by more computer-oriented types of people and centers
around group conversation.&amp;nbsp; Personally most of what I use it for is
open-source software I use (I'm almost always in &lt;a class="reference external" href="irc://irc.mozilla.org/#instantbird"&gt;#instantbird&lt;/a&gt;,
&lt;a class="reference external" href="irc://irc.mozilla.org/#maildev"&gt;#maildev&lt;/a&gt;, and &lt;a class="reference external" href="irc://irc.mozilla.org/#songbird"&gt;#songbird&lt;/a&gt; on &lt;a class="reference external" href="http://irc.mozilla.org/"&gt;Mozilla's IRC servers&lt;/a&gt;.)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="why-it-is-done-what-advantages-are-there-once-this-is-done"&gt;
&lt;h2&gt;Why it is done?&amp;nbsp; What advantages are there once this is done?&lt;/h2&gt;
&lt;p&gt;I touched upon this a little in my &lt;a class="reference external" href="https://clokep.github.io/javascript-irc-in-instantbird.html"&gt;last post&lt;/a&gt;.&amp;nbsp; In terms of
Instantbird: there's an idea of switching some / all of the protocols
(eventually) to be JavaScript protocols instead of the libpurple
versions (libpurple is written mostly in C and is cross-platform, but
recent gains in speed in JavaScript allow this advantage of libpurple to
not matter as much).&amp;nbsp; This would unfortunately mean we need to maintain
a lot more code, but it would allow us to integrate protocols in any way
that we see fit, instead of only using APIs / methods provided by
libpurple.&amp;nbsp; Hopefully this would allow us to &lt;a class="reference external" href="https://bugzilla.instantbird.org/showdependencytree.cgi?id=507&amp;amp;maxdepth=2&amp;amp;hide_resolved=1"&gt;enhance our IRC
implementation&lt;/a&gt; a bit.&lt;/p&gt;
&lt;p&gt;Also, Instantbird (nightlies) currently have limited support for
generating a protocol plug-in in JavaScript.&amp;nbsp; A couple of &amp;quot;test&amp;quot;
protocols have be done, but nothing in &amp;quot;real&amp;quot; (in particular, none that
used a multi-user chat).&amp;nbsp; This would allow us to iron out &lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=519"&gt;some&lt;/a&gt;
&lt;a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=118"&gt;bugs&lt;/a&gt; in the implementation of JavaScript protocols.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;[Edit: Florian suggested another question that wasn't originally
covered, which some people more familiar with Mozilla code might be
wondering.]&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="why-aren-t-you-using-the-code-from-chatzilla"&gt;
&lt;h2&gt;Why aren't you using the code from ChatZilla?&lt;/h2&gt;
&lt;p&gt;This was a tough one.&amp;nbsp; Honestly when I first wanted a parsing
algorithm, I looked at the ChatZilla code, I used it.&amp;nbsp; Then rewrote it
in a fourth as many lines (&lt;a class="reference external" href="http://hg.mozilla.org/chatzilla/file/tip/js/lib/irc.js#l1250"&gt;93&lt;/a&gt; vs. &lt;a class="reference external" href="https://hg.instantbird.org/experiments/file/IRC-JavaScript/components/ircProtocol.js#l208"&gt;20&lt;/a&gt;).&amp;nbsp; Simply said, the code in
ChatZilla is &lt;em&gt;old&lt;/em&gt;, it doesn't use many of the features available only
in newer versions of JavaScript.&amp;nbsp; To that point, the ChatZilla code
hasn't been updated in over a year!&amp;nbsp; The last check-in was: 2009-10-03,
below is a &lt;a class="reference external" href="http://hg.mozilla.org/chatzilla/log/tip/js/lib/irc.js"&gt;quick summary&lt;/a&gt; of the number of check-ins per year:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;2010: 0&lt;/li&gt;
&lt;li&gt;2009: 5&lt;/li&gt;
&lt;li&gt;2008: 15&lt;/li&gt;
&lt;li&gt;2007: 11&lt;/li&gt;
&lt;li&gt;2006: 18&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There's been a pretty steady decline in check-ins.&amp;nbsp; I could take this
code and attempt to whip it into shape and make huge sweeping changes
and commit them back to ChatZilla, but honestly it was easier to start
over for me.&amp;nbsp; Regardless of ease, I'm not sure it would work any:
especially since the ChatZilla code seems overly complicated and overly
specific (since it wasn't really built as a library as far as I can
see), especially since all the code is meant to deal only with IRC.&amp;nbsp; The
Instantbird code needs to be protocol agnostic to a degree, while is why
it interfaces to purplexpcom.&lt;/p&gt;
&lt;p&gt;A quick example of this is: ChatZilla uses a CIRCUser object, but for
Instantbird I need to create either an imIContact or a
purpleIAccountBuddy (depending on the situation).&amp;nbsp; It's possible that's
can be abstracted and code shared -- but I'm not sure it would be worth
the effort.&amp;nbsp; After all this, I should probably look more into the
ChatZilla code, perhaps more of it could be used.&lt;/p&gt;
&lt;p&gt;(If someone familiar with the ChatZilla code base -- I don't know
who/if there's a maintainer -- is interested in talking with me, please
get in contact here or on #instantbird.&amp;nbsp; It's possible we could align
some of what I've been working on, but I'm not sure how much could be
shared besides the parsing algorithm).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;[End edit]&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="what-are-the-specific-advantages-for-an-end-user"&gt;
&lt;h2&gt;What are the specific advantages for an end-user?&lt;/h2&gt;
&lt;p&gt;In terms of the IRC protocol itself, there shouldn't be any, my goal
is for it to be a drop in replacement for the libpurple implementation
with automatic account migration, etc. For end-users we can hopefully
solve &lt;a class="reference external" href="https://bugzilla.instantbird.org/showdependencytree.cgi?id=574&amp;amp;maxdepth=1&amp;amp;hide_resolved=1"&gt;a few annoying IRC UI issues&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="what-about-for-developers-anything-cool-there"&gt;
&lt;h2&gt;What about for developers?&amp;nbsp; Anything cool there?&lt;/h2&gt;
&lt;p&gt;Well, I'm hoping to be able to test this replacement via an extension
that replaces the libpurple IRC to dogfood it before eventual inclusion
in Instantbird.&amp;nbsp; I'm not sure if that counts as &amp;quot;cool.&amp;quot; though.&amp;nbsp; If
nothing else there will be an example of how to write a protocol in
JavaScript (using sockets).&amp;nbsp; So hopefully other people can make some
other cool protocols off of that example.&amp;nbsp; You might wonder what else we
have planned for JavaScript protocols; there are plans to make at least
a Twitter protocol.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="how-is-this-being-done"&gt;
&lt;h2&gt;How is this being done?&lt;/h2&gt;
&lt;p&gt;Well I said up above IRC has a specification, right?&amp;nbsp; Well, yes.
There's the &lt;a class="reference external" href="http://tools.ietf.org/html/rfc1459"&gt;original specification&lt;/a&gt;, this was superseded by &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2810"&gt;four&lt;/a&gt;
&lt;a class="reference external" href="http://tools.ietf.org/html/rfc2811"&gt;different&lt;/a&gt; &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2812"&gt;specification&lt;/a&gt; &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2813"&gt;documents&lt;/a&gt;.&amp;nbsp; Of which we only really
care about one: &lt;a class="reference external" href="http://tools.ietf.org/html/rfc2812"&gt;the client protocol&lt;/a&gt;.&amp;nbsp; So we have this updated
specification (try reading it, it's rather painful), which is good.
It's relatively straightforward set of commands and responses/errors.
It's a bit more confusing than that though since there are a couple of
extensions, etc.&amp;nbsp; This is summarized below:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;[STRIKEOUT:RFC 1459]&lt;ul&gt;
&lt;li&gt;Extended with &lt;a class="reference external" href="http://www.irchelp.org/irchelp/rfc/dccspec.html"&gt;[STRIKEOUT:DCC specification (&amp;quot;direct client-to-client&amp;quot;)]&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;Replaced with [STRIKEOUT:&lt;a class="reference external" href="http://www.irchelp.org/irchelp/rfc/dccspec.html"&gt;CTCP (&amp;quot;client-to-client protocol&amp;quot;)&lt;/a&gt;]&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.invlogic.com/irc/ctcp.html"&gt;Draft for a formalized CTCP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;(Apparently some people are working on a &lt;a class="reference external" href="http://www.dcc2.org/"&gt;DCC2&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Officially replaced with RFCs 2810, 2811, 2812, 2813&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A lot of this is being done by reading the specifications and finding
the proper responses, etc.&amp;nbsp; I've also used &lt;a class="reference external" href="http://www.wireshark.org/download.html"&gt;Wireshark&lt;/a&gt; a bit to see how
libpurple sends IRC commands (in particular, in what order it sends them
in).&amp;nbsp; A lot of my development is happening on live IRC servers, which
isn't really best practice, but I'm mostly sending commands by hand to
see the responses since a bunch of non-standard responses and extensions
have developed beyond the above.&amp;nbsp; I have been using &lt;a class="reference external" href="http://ircd.bircd.org/"&gt;beware irc&lt;/a&gt; to run
a daemon on my own machine, however.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="so-how-far-along-are-you"&gt;
&lt;h2&gt;So how far along are you?&lt;/h2&gt;
&lt;p&gt;I've started implementing RFC 2812 and have a variety of commands done
(the login sequence occurs automatically, the server connection is kept
alive, messages can be sent to a channel and are parsed when received, a
lot of the initial server information is displayed but unparsed).&amp;nbsp; But
there's a lot more to do!&amp;nbsp; As my last post outlined, I recently was able
to successfully get a chat to work in Instantbird from a silly bug I had
been having.&lt;/p&gt;
&lt;p&gt;It's rather slow going since I'll start to implement something from
the IRC side, and then realize the &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/file/tip/purple/purplexpcom/src/jsProtoHelper.jsm"&gt;Instantbird layer&lt;/a&gt; (the jsProtocol
module) is missing a component I need.&amp;nbsp; One of the major parts of
working on this is extending the Instantbird layer to contain the proper
functions and objects needed to implement chats via JavaScript.&amp;nbsp; This is
usually the slowest going part of my code, since it involves interfacing
with Instantbird / &lt;a class="reference external" href="http://hg.instantbird.org/instantbird/file/tip/purple/purplexpcom/public/"&gt;purplexpcom&lt;/a&gt;.&amp;nbsp; Luckily Florian, the main developer
of Instantbird, has been a big help with this (as have other
participants of #instantbird -- in particular I know Mic helped track
down a few syntax type bugs).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="what-s-next"&gt;
&lt;h2&gt;What's next?&lt;/h2&gt;
&lt;p&gt;Now that have the basics of chat working, I need to start handling the
QUIT, PART and JOIN commands for when other users enter &amp;amp; leave chat
rooms.&amp;nbsp; Once these are complete it should be quite usable, although the
entire preference system still doesn't exist, including notifying the UI
of what options are available.&amp;nbsp; In addition, I need to look into doing
SSL sockets.&lt;/p&gt;
&lt;p&gt;Once the protocol plug-in is done, we plan to abstract sections of it
that will be useful for other protocols (in particular the socket
connection aspects).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="where-can-i-see-this-stuff"&gt;
&lt;h2&gt;Where can I see this stuff...?&lt;/h2&gt;
&lt;p&gt;My work is kept in the &amp;quot;&lt;a class="reference external" href="https://hg.instantbird.org/experiments/file/IRC-JavaScript/"&gt;experiments&lt;/a&gt;&amp;quot; repository on Instantbird's
&lt;a class="reference external" href="http://mercurial.selenic.com/"&gt;Mercurial&lt;/a&gt; repository.&amp;nbsp; There's also a variety of bugs open (they're
listed above, I'm not going to re-list them), although not a ton is
happening in them.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="how-can-i-help"&gt;
&lt;h2&gt;How can I help?!&lt;/h2&gt;
&lt;p&gt;Well you can of course feel free to download the code and hack on it,
let me know (via IRC or any of the bugs most likely) if you have a patch
you'd like me to apply.&amp;nbsp; Or if you just found something that doesn't
work you can feel free to let me know, although I probably just haven't
gotten around to fixing it yet.&lt;/p&gt;
&lt;p&gt;Also, if you've ever found something annoying / broken in the IRC
implementation in Instantbird / libpurple please let us know (through
any of the above contact sources).&lt;/p&gt;
&lt;p&gt;Hopefully that's a bit of a better explanation of why we're spending
time to rewrite the IRC protocol implementation into JavaScript -- we
definitely think it's worth it and can lead to a bunch of new unique
protocol plug-ins for Instantbird.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category><category term="Mozilla"></category><category term="programming"></category></entry><entry><title>JavaScript IRC in Instantbird</title><link href="https://clokep.github.io/javascript-irc-in-instantbird.html" rel="alternate"></link><updated>2010-12-04T21:24:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2010-12-04:javascript-irc-in-instantbird.html</id><summary type="html">&lt;p&gt;I've been working on rewriting the IRC plugin for &lt;a class="reference external" href="http://www.instantbird.com/"&gt;Instantbird&lt;/a&gt; since
the summer (sometime in August, I can't seem to find the exact date --
at least since Sept. 10th though).&lt;/p&gt;
&lt;p&gt;Since &lt;a class="reference external" href="http://developer.pidgin.im/wiki/WhatIsLibpurple"&gt;libpurple&lt;/a&gt; (used in Pidgin, Adium, etc.) provides the IRC
protocol that we currently use, why do this?&amp;nbsp; One reason is to iron out
(and find) some of the bugs left in implementing protocols in JavaScript
and part of it is so I can learn to code better.&amp;nbsp; Unfortunately during
this semester I was not able to get as much done as I had hoped and
almost everything that had been done was finished in August/September&lt;/p&gt;
&lt;p&gt;Some big milestones I've completed (with dates if I have them):&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Connected to server via sockets in JavaScript&lt;/li&gt;
&lt;li&gt;Generate a conversation that works as a raw connection to the server
(i.e. as if you had opened a telnet connection to the server)&lt;/li&gt;
&lt;li&gt;Parsing messages and automatic ponging when the server pings&lt;/li&gt;
&lt;li&gt;Joining a channel (2010/12/04, i.e. today!)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There had been a bunch of small bugs I had been having in getting this
to work: one error, (which I found quickly) one of the other developers
(&lt;a class="reference external" href="http://queze.net/"&gt;Florian&lt;/a&gt;) was able to help me out with, was that I was not initiating
a &lt;strong&gt;new&lt;/strong&gt; object.&amp;nbsp; And after learning a bit above observers I was able
to get the UI to respond.&amp;nbsp; I even threw in support for op/half-op/voice
After today's work I was able to generate the following screenshot:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://clokep.github.io/images/IRCworking2.png"&gt;&lt;img alt="IRCworking" src="https://clokep.github.io/images/IRCworking2.png" style="height: 297px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This build would be almost fully usable by those who do very little on
IRC (i.e. if you just want to go and chat, it'd work well), but there's
a lot more work to be done.&amp;nbsp; The code can be viewed in the &lt;a class="reference external" href="https://hg.instantbird.org/experiments/file/IRC-JavaScript/"&gt;Experiments
repository&lt;/a&gt;.&amp;nbsp; (Check it out, there's a 600+ line switch statement.)&lt;/p&gt;
</summary><category term="Instantbird"></category><category term="IRC"></category><category term="Mozilla"></category><category term="programming"></category></entry><entry><title>Yahoo &amp; Thunderbird Can Finally Play Nice?</title><link href="https://clokep.github.io/yahoo-thunderbird-can-finally-play-nice.html" rel="alternate"></link><updated>2010-11-23T03:03:00-05:00</updated><author><name>Patrick Cloke</name></author><id>tag:https://clokep.github.io,2010-11-23:yahoo-thunderbird-can-finally-play-nice.html</id><summary type="html">&lt;p&gt;For years I've been dealing with Yahoo's lack of support for any sort
of decent (free) POP3/IMAP/SMTP protocol support.&amp;nbsp; Why do I need this?
So I can check my &lt;a class="reference external" href="http://mail.yahoo.com/"&gt;Yahoo mail&lt;/a&gt; in &lt;a class="reference external" href="http://www.mozillamessaging.com/en-US/thunderbird/"&gt;Mozilla Thunderbird&lt;/a&gt; of course!&lt;/p&gt;
&lt;p&gt;At first I used &lt;a class="reference external" href="http://ypopsemail.com/"&gt;YPOPS!&lt;/a&gt;, a program that read the HTML pages provided
by the Yahoo webmail client and served the emails on a local POP
server.&amp;nbsp; Cool, right?&amp;nbsp; Except it always broke whenever Yahoo changed
their pages around.&lt;/p&gt;
&lt;p&gt;After a bit I moved onto using the &lt;a class="reference external" href="http://www.blogger.com/"&gt;WebMail extension&lt;/a&gt; for
Thunderbird.&amp;nbsp; It essentially works the same way, but runs in the
Thunderbird process as an extension instead of as a separate service.
It's a little complicated to set up and requires two extensions.&amp;nbsp; The
general WebMail extension and a Yahoo specific one (there's also ones
available for Hotmail, Gmail, Libero and AOL).&amp;nbsp; You might wonder why
this exists for some services that have always had POP/IMAP access
(Gmail)?&amp;nbsp; I was too, apparently some people cannot check those ports
because of firewall issues so this essentially allows them to check it
via port 80, over an HTTP connection.&lt;/p&gt;
&lt;p&gt;A few months ago I came across &lt;a class="reference external" href="http://www.emaildiscussions.com/showthread.php?t=59575"&gt;post&lt;/a&gt; describing how a &lt;a class="reference external" href="http://en.wikipedia.org/w/index.php?title=Yahoo%21_Mail&amp;amp;oldid=396914770#Free_IMAP_and_SMTPs_access"&gt;simple
(nonstandard) command&lt;/a&gt; could allow access to the Yahoo IMAP server, but
it required &lt;a class="reference external" href="http://www.crasseux.com/linux/"&gt;patching the Thunderbird source&lt;/a&gt; -- not an option for me
since I've been running nightlies of either Thunderbird 3.1 or 3.2/3.3
for a while now. (I mean sure, I could do it...but WebMail extension was
working fine.)&amp;nbsp; There was &lt;a class="reference external" href="http://groups.google.com/group/mozilla.dev.apps.thunderbird/browse_thread/thread/546356554c73f8ca"&gt;some discussion&lt;/a&gt; about it and a &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=493064"&gt;bug&lt;/a&gt; was
filed for Thunderbird.&lt;/p&gt;
&lt;p&gt;So how did this lead to free IMAP support?&amp;nbsp; I noticed in the &lt;a class="reference external" href="https://wiki.mozilla.org/Thunderbird/StatusMeetings/2010-11-16#Web_Update"&gt;Weekly
Status Meeting Notes (2010-11-16)&lt;/a&gt; for Thunderbird a mention of &lt;a class="reference external" href="http://trunk.mozillamessaging.com/en-US/thunderbird/features/email_providers.html"&gt;Free
Email Providers&lt;/a&gt; page.&amp;nbsp; Checking it out it said &amp;quot;Y! Mail is a free
email service provided by Yahoo! It offers webmail supported by targeted
advertising as well as IMAP access.&amp;quot;&amp;nbsp; Hmm...but I just said they don't
have support this for free! A quick Bing search brought up a &lt;a class="reference external" href="http://www.theanimail.com/imap_server_settings.html"&gt;page with
IMAP server settings&lt;/a&gt;.&amp;nbsp; I figured I'd check if they work, and sure
enough they did!&amp;nbsp; The settings are copied below:&lt;/p&gt;
&lt;blockquote&gt;
&lt;table class="docutils field-list" frame="void" rules="none"&gt;
&lt;col class="field-name" /&gt;
&lt;col class="field-body" /&gt;
&lt;tbody valign="top"&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;User name:&lt;/th&gt;&lt;td class="field-body"&gt;[STRIKEOUT:user&amp;#64;yahoo.com] user&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;IMAP server:&lt;/th&gt;&lt;td class="field-body"&gt;[STRIKEOUT:imap-ssl.mail.yahoo.com] imap.mail.yahoo.com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;Port:&lt;/th&gt;&lt;td class="field-body"&gt;993&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;Password:&lt;/th&gt;&lt;td class="field-body"&gt;Cleartext/Normal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;SSL:&lt;/th&gt;&lt;td class="field-body"&gt;yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;SMTP server:&lt;/th&gt;&lt;td class="field-body"&gt;smtp.mail.yahoo.com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;Port:&lt;/th&gt;&lt;td class="field-body"&gt;465&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;Password:&lt;/th&gt;&lt;td class="field-body"&gt;Cleartext/Normal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="field"&gt;&lt;th class="field-name"&gt;SSL:&lt;/th&gt;&lt;td class="field-body"&gt;yes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/blockquote&gt;
&lt;p&gt;Awesome!&amp;nbsp; Anyway, I replied with this info in the aforementioned bug
and &lt;a class="reference external" href="https://bugzilla.mozilla.org/attachment.cgi?id=492550&amp;amp;action=diff"&gt;a patch&lt;/a&gt; was quickly added by Mozilla's &lt;a class="reference external" href="http://www.bucksch.org/1/projects/mozilla/"&gt;Ben Bucksch&lt;/a&gt; to support
this in Thunderbird, hopefully it'll make it into the next version!&amp;nbsp; It
was also brought to my attention that imap-ssl.mail.yahoo.com provides
an SSL certificate that is valid for imap.mail.yahoo.com only, I'd
suggest using that former.&lt;/p&gt;
&lt;p&gt;Note that I'm currently suffering from &lt;a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=610264"&gt;another bug&lt;/a&gt; while using
Yahoo IMAP.&amp;nbsp; Everything works, there's just an annoying pop-up
occasionally about the error.&amp;nbsp; Hopefully it will be fixed soon.&lt;/p&gt;
</summary><category term="bugs"></category><category term="email"></category><category term="IMAP"></category><category term="Mozilla"></category><category term="POP3"></category><category term="programming"></category><category term="SMTP"></category><category term="Thunderbird"></category><category term="Yahoo"></category></entry></feed>